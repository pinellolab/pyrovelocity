schema: '2.0'
stages:
  data_download_pancreas:
    cmd: python data_download.py data_external.sources=[scvelo] data_external.scvelo.download=[pancreas]
    deps:
    - path: data_download.py
      md5: 30f38cc794cbf4caad2675ffd88c2467
      size: 3305
    params:
      config.yaml:
        base:
          log_level: INFO
        data_external.scvelo.pancreas:
          data_file: endocrinogenesis_day15.h5ad
          dl_root: data/Pancreas
          dl_path: data/Pancreas/endocrinogenesis_day15.h5ad
          rel_path: data/external/endocrinogenesis_day15.h5ad
          url: https://github.com/theislab/scvelo_notebooks/raw/master/data/Pancreas/endocrinogenesis_day15.h5ad
          derived:
            process_method: load_data
            process_args:
              process_cytotrace: true
            rel_path: data/processed/pancreas_processed.h5ad
    outs:
    - path: data/external/endocrinogenesis_day15.h5ad
      md5: 783ec70c72fd895eeea28c07735efc27
      size: 52477898
  preprocess_pancreas:
    cmd: python preprocess.py data_external.sources=[scvelo] data_external.scvelo.process=[pancreas]
    deps:
    - path: data/external/endocrinogenesis_day15.h5ad
      md5: 783ec70c72fd895eeea28c07735efc27
      size: 52477898
    - path: preprocess.py
      md5: bf09c86fc25b1d1a98b9aa1c5fa04361
      size: 2757
    params:
      config.yaml:
        base:
          log_level: INFO
        data_external.scvelo.pancreas:
          data_file: endocrinogenesis_day15.h5ad
          dl_root: data/Pancreas
          dl_path: data/Pancreas/endocrinogenesis_day15.h5ad
          rel_path: data/external/endocrinogenesis_day15.h5ad
          url: https://github.com/theislab/scvelo_notebooks/raw/master/data/Pancreas/endocrinogenesis_day15.h5ad
          derived:
            process_method: load_data
            process_args:
              process_cytotrace: true
            rel_path: data/processed/pancreas_processed.h5ad
    outs:
    - path: data/processed/pancreas_processed.h5ad
      md5: 14f5abed25caaaaf7be172657b809b96
      size: 424775272
  train_pancreas_model1:
    cmd: /usr/bin/time -v python train.py model_training.train=[pancreas_model1]
    deps:
    - path: data/processed/pancreas_processed.h5ad
      md5: 09cd1685ebf6d96d69c500fec653a337
      size: 424784368
    - path: train.py
      md5: c866df8072532a9ccd9b9b0a5974fdb4
      size: 8684
    params:
      config.yaml:
        model_training.pancreas_model1:
          path: models/pancreas_model1
          model_path: models/pancreas_model1/model
          input_data_path: data/processed/pancreas_processed.h5ad
          trained_data_path: models/pancreas_model1/trained.h5ad
          pyrovelocity_data_path: models/pancreas_model1/pyrovelocity.pkl
          metrics_path: models/pancreas_model1/metrics.json
          run_info_path: models/pancreas_model1/run_info.json
          vector_field_parameters:
            basis: umap
          training_parameters:
            _target_: pyrovelocity.api.train_model
            _partial_: true
            guide_type: auto_t0_constraint
            model_type: auto
            svi_train: false
            batch_size: -1
            train_size: 1.0
            use_gpu: 0
            likelihood: Poisson
            num_samples: 30
            log_every: 100
            cell_state: clusters
            patient_improve: 0.0001
            patient_init: 45
            seed: 99
            lr: 0.01
            max_epochs: 2000
            include_prior: true
            library_size: true
            offset: false
            input_type: raw
            cell_specific_kinetics:
            kinetics_num: 2
            loss_plot_path: models/pancreas_model1/loss_plot.png
    outs:
    - path: models/pancreas_model1/loss_plot.png
      md5: 5a0d4bd417a02d36b83211a695acf47c
      size: 11561
    - path: models/pancreas_model1/metrics.json
      md5: 37a146281f1d1ea77953a0d03c872367
      size: 160
    - path: models/pancreas_model1/model
      md5: ed4ded1a0cd1bd95b48872af78c0ab75.dir
      size: 635690
      nfiles: 1
    - path: models/pancreas_model1/pyrovelocity.pkl
      md5: c48234e73277f5131ea88bb3064a0499
      size: 111752520
    - path: models/pancreas_model1/run_info.json
      md5: 5387c03cb4ea4c6805e817be53865440
      size: 455
    - path: models/pancreas_model1/trained.h5ad
      md5: e77ffea5c0632aeecdf2003a132f6d20
      size: 492580352
  data_download_pbmc68k:
    cmd: python data_download.py data_external.sources=[scvelo] data_external.scvelo.download=[pbmc68k]
    deps:
    - path: data_download.py
      md5: 30f38cc794cbf4caad2675ffd88c2467
      size: 3305
    params:
      config.yaml:
        base:
          log_level: INFO
        data_external.scvelo.pbmc68k:
          data_file: pbmc68k.h5ad
          dl_root: data/PBMC
          dl_path: data/PBMC/pbmc68k.h5ad
          rel_path: data/external/pbmc68k.h5ad
          url: https://ndownloader.figshare.com/files/27686886
          derived:
            process_method: load_data
            process_args: {}
            rel_path: data/processed/pbmc68k_processed.h5ad
    outs:
    - path: data/external/pbmc68k.h5ad
      md5: ee0953e5fb994bc3cec05d4cf638ac79
      size: 123707283
  preprocess_pbmc68k:
    cmd: python preprocess.py data_external.sources=[scvelo] data_external.scvelo.process=[pbmc68k]
    deps:
    - path: data/external/pbmc68k.h5ad
      md5: ee0953e5fb994bc3cec05d4cf638ac79
      size: 123707283
    - path: preprocess.py
      md5: bf09c86fc25b1d1a98b9aa1c5fa04361
      size: 2757
    params:
      config.yaml:
        base:
          log_level: INFO
        data_external.scvelo.pbmc68k:
          data_file: pbmc68k.h5ad
          dl_root: data/PBMC
          dl_path: data/PBMC/pbmc68k.h5ad
          rel_path: data/external/pbmc68k.h5ad
          url: https://ndownloader.figshare.com/files/27686886
          derived:
            process_method: load_data
            process_args: {}
            rel_path: data/processed/pbmc68k_processed.h5ad
    outs:
    - path: data/processed/pbmc68k_processed.h5ad
      md5: 00512e0c632850bdb69625413a97bca6
      size: 1677116165
  train_pbmc68k_model1:
    cmd: /usr/bin/time -v python train.py model_training.train=[pbmc68k_model1]
    deps:
    - path: data/processed/pbmc68k_processed.h5ad
      md5: ed04e6618cd8746a59093b4354729e6a
      size: 1971965630
    - path: train.py
      md5: c866df8072532a9ccd9b9b0a5974fdb4
      size: 8684
    params:
      config.yaml:
        model_training.pbmc68k_model1:
          path: models/pbmc68k_model1
          model_path: models/pbmc68k_model1/model
          input_data_path: data/processed/pbmc68k_processed.h5ad
          trained_data_path: models/pbmc68k_model1/trained.h5ad
          pyrovelocity_data_path: models/pbmc68k_model1/pyrovelocity.pkl
          metrics_path: models/pbmc68k_model1/metrics.json
          run_info_path: models/pbmc68k_model1/run_info.json
          vector_field_parameters:
            basis: tsne
          training_parameters:
            _target_: pyrovelocity.api.train_model
            _partial_: true
            guide_type: auto_t0_constraint
            model_type: auto
            svi_train: false
            batch_size: -1
            train_size: 1.0
            use_gpu: 0
            likelihood: Poisson
            num_samples: 30
            log_every: 100
            cell_state: celltype
            patient_improve: 0.0001
            patient_init: 45
            seed: 99
            lr: 0.01
            max_epochs: 2000
            include_prior: true
            library_size: true
            offset: false
            input_type: raw
            cell_specific_kinetics:
            kinetics_num: 2
            loss_plot_path: models/pbmc68k_model1/loss_plot.png
    outs:
    - path: models/pbmc68k_model1/loss_plot.png
      md5: a37f382c7ef18d0cf52f59a65e63b148
      size: 16351
    - path: models/pbmc68k_model1/metrics.json
      md5: c29ff87fea000bf739fd4ea35ac7b817
      size: 161
    - path: models/pbmc68k_model1/model
      md5: 076c8b643e46b08b02fbbde06cb22228.dir
      size: 1701354
      nfiles: 1
    - path: models/pbmc68k_model1/pyrovelocity.pkl
      md5: fe7681af63936fe988ea942b0131fb36
      size: 724018132
    - path: models/pbmc68k_model1/run_info.json
      md5: 8d6b1da16ca7cddd3034cdedab8f044a
      size: 454
    - path: models/pbmc68k_model1/trained.h5ad
      md5: 529f8a38f96a77bbec3c3632c4efefeb
      size: 2437840906
  figure2:
    cmd: python fig2/figure.py
    deps:
    - path: fig2/figure.py
      md5: ff1ac53128478106cf019fc967bd35c4
      size: 19573
    - path: models/pancreas_model1/pyrovelocity.pkl
      md5: c48234e73277f5131ea88bb3064a0499
      size: 111752520
    - path: models/pancreas_model1/trained.h5ad
      md5: e77ffea5c0632aeecdf2003a132f6d20
      size: 492580352
    - path: models/pbmc68k_model1/pyrovelocity.pkl
      md5: fe7681af63936fe988ea942b0131fb36
      size: 724018132
    - path: models/pbmc68k_model1/trained.h5ad
      md5: 529f8a38f96a77bbec3c3632c4efefeb
      size: 2437840906
    params:
      config.yaml:
        reports.figure2:
          tag: fig2
          path: reports/fig2
          tif_path: reports/fig2/fig2_raw_gene_selection_model1.tif
          svg_path: reports/fig2/fig2_raw_gene_selection_model1.svg
          biomarker_selection_path: reports/fig2/fig2_markers_selection_scatterplot.tif
          biomarker_phaseportrait_path: reports/fig2/fig2_markers_phaseportrait.pdf
          uncertainty_param_plot_path: reports/fig2/fig2_param_uncertainties.pdf
          uncertainty_magnitude_plot_path: reports/fig2/fig2_magnitude_uncertainties.pdf
          pancreas_model1:
            shared_time_plot: reports/fig2/fig2_pancreas_shared_time.pdf
            volcano_plot: reports/fig2/fig2_pancreas_volcano.pdf
            rainbow_plot: reports/fig2/fig2_pancreas_rainbow.pdf
            vector_field_plot: reports/fig2/fig2_pancreas_vector_field.pdf
    outs:
    - path: reports/fig2/fig2_markers_phaseportrait.pdf
      md5: cc7f219a6e6bd6cb67f1990dc76639e9
      size: 4548720
    - path: reports/fig2/fig2_markers_selection_scatterplot.tif
      md5: 2bf4528b73112ead7cbdb1f28362850b
      size: 6125606
    - path: reports/fig2/fig2_param_uncertainties.pdf
      md5: 9de0508d4595d98e547aba446254646a
      size: 79990
    - path: reports/fig2/fig2_raw_gene_selection_model1.svg
      md5: bcff3c75773f88bbe5af854bf6dbfc31
      size: 49275888
    - path: reports/fig2/fig2_raw_gene_selection_model1.tif
      md5: 1877cc541d6979b75aa74273c773fcea
      size: 19864142
  plot_pancreas_model1:
    cmd: python fig2/fig2_pancreas_plot.py
    deps:
    - path: fig2/fig2_pancreas_plot.py
      md5: 9760277a8b45c2994e44f0ebc69b26e1
      size: 5816
    - path: models/pancreas_model1/pyrovelocity.pkl
      md5: c48234e73277f5131ea88bb3064a0499
      size: 111752520
    - path: models/pancreas_model1/trained.h5ad
      md5: e77ffea5c0632aeecdf2003a132f6d20
      size: 492580352
    params:
      config.yaml:
        model_training.pancreas_model1:
          path: models/pancreas_model1
          model_path: models/pancreas_model1/model
          input_data_path: data/processed/pancreas_processed.h5ad
          trained_data_path: models/pancreas_model1/trained.h5ad
          pyrovelocity_data_path: models/pancreas_model1/pyrovelocity.pkl
          metrics_path: models/pancreas_model1/metrics.json
          run_info_path: models/pancreas_model1/run_info.json
          vector_field_parameters:
            basis: umap
          training_parameters:
            _target_: pyrovelocity.api.train_model
            _partial_: true
            guide_type: auto_t0_constraint
            model_type: auto
            svi_train: false
            batch_size: -1
            train_size: 1.0
            use_gpu: 0
            likelihood: Poisson
            num_samples: 30
            log_every: 100
            cell_state: clusters
            patient_improve: 0.0001
            patient_init: 45
            seed: 99
            lr: 0.01
            max_epochs: 2000
            include_prior: true
            library_size: true
            offset: false
            input_type: raw
            cell_specific_kinetics:
            kinetics_num: 2
            loss_plot_path: models/pancreas_model1/loss_plot.png
        reports.figure2.pancreas_model1:
          shared_time_plot: reports/fig2/fig2_pancreas_shared_time.pdf
          volcano_plot: reports/fig2/fig2_pancreas_volcano.pdf
          rainbow_plot: reports/fig2/fig2_pancreas_rainbow.pdf
          vector_field_plot: reports/fig2/fig2_pancreas_vector_field.pdf
    outs:
    - path: reports/fig2/fig2_pancreas_rainbow.pdf
      md5: 40fb480c0dc47c9c713e18271e0b3569
      size: 673601
    - path: reports/fig2/fig2_pancreas_shared_time.pdf
      md5: 8aaf309fa5c24a499161172006b669fa
      size: 659960
    - path: reports/fig2/fig2_pancreas_vector_field.pdf
      md5: 09fc15b93cd288f74c366656d8f2f59a
      size: 407916
    - path: reports/fig2/fig2_pancreas_volcano.pdf
      md5: 05e306a4fcf13b9ee765239fa69e3ce2
      size: 21290
  data_download_larry:
    cmd: python data_download.py data_external.sources=[pyrovelocity] data_external.pyrovelocity.download=[larry]
    deps:
    - path: data_download.py
      md5: 30f38cc794cbf4caad2675ffd88c2467
      size: 3305
    params:
      config.yaml:
        base:
          log_level: INFO
        data_external.pyrovelocity.larry:
          data_file: larry.h5ad
          dl_root: data/external
          dl_path: data/external/larry.h5ad
          rel_path: data/external/larry.h5ad
          url: https://ndownloader.figshare.com/files/37028569
          derived:
            process_method: load_data
            process_args: {}
            rel_path: data/processed/larry_processed.h5ad
    outs:
    - path: data/external/larry.h5ad
      md5: d618305c0ee0e41570b1147e63df332a
      size: 1525338690
  train_pancreas_model2:
    cmd: /usr/bin/time -v python train.py model_training.train=[pancreas_model2]
    deps:
    - path: data/processed/pancreas_processed.h5ad
      md5: 09cd1685ebf6d96d69c500fec653a337
      size: 424784368
    - path: train.py
      md5: c866df8072532a9ccd9b9b0a5974fdb4
      size: 8684
    params:
      config.yaml:
        model_training.pancreas_model2:
          path: models/pancreas_model2
          model_path: models/pancreas_model2/model
          input_data_path: data/processed/pancreas_processed.h5ad
          trained_data_path: models/pancreas_model2/trained.h5ad
          pyrovelocity_data_path: models/pancreas_model2/pyrovelocity.pkl
          metrics_path: models/pancreas_model2/metrics.json
          run_info_path: models/pancreas_model2/run_info.json
          vector_field_parameters:
            basis: umap
          training_parameters:
            _target_: pyrovelocity.api.train_model
            _partial_: true
            guide_type: auto
            model_type: auto
            svi_train: false
            batch_size: -1
            train_size: 1.0
            use_gpu: 0
            likelihood: Poisson
            num_samples: 30
            log_every: 100
            cell_state: clusters
            patient_improve: 0.0001
            patient_init: 45
            seed: 99
            lr: 0.01
            max_epochs: 2000
            include_prior: true
            library_size: true
            offset: true
            input_type: raw
            cell_specific_kinetics:
            kinetics_num: 2
            loss_plot_path: models/pancreas_model2/loss_plot.png
    outs:
    - path: models/pancreas_model2/loss_plot.png
      md5: 8a8de154eb3e3ad3c1f11264eadedacd
      size: 11500
    - path: models/pancreas_model2/metrics.json
      md5: bee341290f771daa82fe093995c39428
      size: 158
    - path: models/pancreas_model2/model
      md5: 754f06bc2ca1232f9585118e25db85fb.dir
      size: 923626
      nfiles: 1
    - path: models/pancreas_model2/pyrovelocity.pkl
      md5: e47389f48189529518dbb8dfc88959c2
      size: 112472656
    - path: models/pancreas_model2/run_info.json
      md5: 87be9883d84208074a4697863cde2fad
      size: 455
    - path: models/pancreas_model2/trained.h5ad
      md5: 8bf34fc00bbc46d950512aa8595844e4
      size: 492567776
  train_pbmc68k_model2:
    cmd: /usr/bin/time -v python train.py model_training.train=[pbmc68k_model2]
    deps:
    - path: data/processed/pbmc68k_processed.h5ad
      md5: 00512e0c632850bdb69625413a97bca6
      size: 1677116165
    - path: train.py
      md5: c866df8072532a9ccd9b9b0a5974fdb4
      size: 8684
    params:
      config.yaml:
        model_training.pbmc68k_model2:
          path: models/pbmc68k_model2
          model_path: models/pbmc68k_model2/model
          input_data_path: data/processed/pbmc68k_processed.h5ad
          trained_data_path: models/pbmc68k_model2/trained.h5ad
          pyrovelocity_data_path: models/pbmc68k_model2/pyrovelocity.pkl
          metrics_path: models/pbmc68k_model2/metrics.json
          run_info_path: models/pbmc68k_model2/run_info.json
          vector_field_parameters:
            basis: tsne
          training_parameters:
            _target_: pyrovelocity.api.train_model
            _partial_: true
            guide_type: auto
            model_type: auto
            svi_train: false
            batch_size: -1
            train_size: 1.0
            use_gpu: 0
            likelihood: Poisson
            num_samples: 30
            log_every: 100
            cell_state: celltype
            patient_improve: 0.0001
            patient_init: 45
            seed: 99
            lr: 0.01
            max_epochs: 2000
            include_prior: true
            library_size: true
            offset: true
            input_type: raw
            cell_specific_kinetics:
            kinetics_num: 2
            loss_plot_path: models/pbmc68k_model2/loss_plot.png
    outs:
    - path: models/pbmc68k_model2/loss_plot.png
      md5: fc1be04e249edbfdae852be361a9b65e
      size: 16196
    - path: models/pbmc68k_model2/metrics.json
      md5: 894b58babe8fc61e18a3f4c0475c2d0d
      size: 158
    - path: models/pbmc68k_model2/model
      md5: 1ba516c332528bb3065b0858dd17c63c.dir
      size: 1768618
      nfiles: 1
    - path: models/pbmc68k_model2/pyrovelocity.pkl
      md5: 51b6e251fff5481399746326fe165657
      size: 320496178
    - path: models/pbmc68k_model2/run_info.json
      md5: b70d01bfb5333d3f262814ecac0517be
      size: 454
    - path: models/pbmc68k_model2/trained.h5ad
      md5: 7b9d6a7252c60c01a97f9796fcad1925
      size: 2250684777
  figureS3:
    cmd: python figS3/figure.py
    deps:
    - path: figS3/figure.py
      md5: 26fb835fc33be2700fe9e65a9f236c9a
      size: 12921
    - path: models/pancreas_model2/pyrovelocity.pkl
      md5: e47389f48189529518dbb8dfc88959c2
      size: 112472656
    - path: models/pancreas_model2/trained.h5ad
      md5: 8bf34fc00bbc46d950512aa8595844e4
      size: 492567776
    - path: models/pbmc68k_model2/pyrovelocity.pkl
      md5: 51b6e251fff5481399746326fe165657
      size: 320496178
    - path: models/pbmc68k_model2/trained.h5ad
      md5: 7b9d6a7252c60c01a97f9796fcad1925
      size: 2250684777
    params:
      config.yaml:
        reports.figureS3:
          tag: figS3
          path: reports/figS3
          tif_path: reports/figS3/figS3_raw_gene_selection_model2.tif
          svg_path: reports/figS3/figS3_raw_gene_selection_model2.svg
    outs:
    - path: reports/figS3/figS3_raw_gene_selection_model2.svg
      md5: bae3d750bf1c05ccdb5e6fa6cd5c5021
      size: 49272520
    - path: reports/figS3/figS3_raw_gene_selection_model2.tif
      md5: f8b794dfcb39d1aabbc4016eb8455fbe
      size: 19732046
  data_download_pons:
    cmd: python data_download.py data_external.sources=[velocyto] data_external.velocyto.download=[pons]
    deps:
    - path: data_download.py
      md5: 30f38cc794cbf4caad2675ffd88c2467
      size: 3305
    params:
      config.yaml:
        base:
          log_level: INFO
        data_external.velocyto.pons:
          data_file: oligo_lite.h5ad
          dl_root: data/external
          dl_path: data/external/oligo_lite.h5ad
          rel_path: data/external/oligo_lite.h5ad
          url: https://storage.googleapis.com/pyrovelocity/data/oligo_lite.h5ad
          derived:
            process_method: load_data
            process_args: {}
            rel_path: data/processed/pons_processed.h5ad
    outs:
    - path: data/external/oligo_lite.h5ad
      md5: 82f5e9f9736e556662f56653d2f927ab
      size: 82166707
  preprocess_pons:
    cmd: python preprocess.py data_external.sources=[velocyto] data_external.velocyto.process=[pons]
    deps:
    - path: data/external/oligo_lite.h5ad
      md5: 82f5e9f9736e556662f56653d2f927ab
      size: 82166707
    - path: preprocess.py
      md5: bf09c86fc25b1d1a98b9aa1c5fa04361
      size: 2757
    params:
      config.yaml:
        base:
          log_level: INFO
        data_external.velocyto.pons:
          data_file: oligo_lite.h5ad
          dl_root: data/external
          dl_path: data/external/oligo_lite.h5ad
          rel_path: data/external/oligo_lite.h5ad
          url: https://storage.googleapis.com/pyrovelocity/data/oligo_lite.h5ad
          derived:
            process_method: load_data
            process_args: {}
            rel_path: data/processed/pons_processed.h5ad
    outs:
    - path: data/processed/pons_processed.h5ad
      md5: 5175aab14f09c1a4b50ebbdd631ef083
      size: 740860850
  train_pons_model1:
    cmd: /usr/bin/time -v python train.py model_training.train=[pons_model1]
    deps:
    - path: data/processed/pons_processed.h5ad
      md5: b34bfedb75377eba646a9bb5b53f5099
      size: 740872455
    - path: train.py
      md5: c866df8072532a9ccd9b9b0a5974fdb4
      size: 8684
    params:
      config.yaml:
        model_training.pons_model1:
          path: models/pons_model1
          model_path: models/pons_model1/model
          input_data_path: data/processed/pons_processed.h5ad
          trained_data_path: models/pons_model1/trained.h5ad
          pyrovelocity_data_path: models/pons_model1/pyrovelocity.pkl
          metrics_path: models/pons_model1/metrics.json
          run_info_path: models/pons_model1/run_info.json
          vector_field_parameters:
            basis: umap
          training_parameters:
            _target_: pyrovelocity.api.train_model
            _partial_: true
            guide_type: auto_t0_constraint
            model_type: auto
            svi_train: false
            batch_size: -1
            train_size: 1.0
            use_gpu: 0
            likelihood: Poisson
            num_samples: 30
            log_every: 100
            cell_state: celltype
            patient_improve: 0.0001
            patient_init: 45
            seed: 99
            lr: 0.01
            max_epochs: 2000
            include_prior: true
            library_size: true
            offset: false
            input_type: raw
            cell_specific_kinetics:
            kinetics_num: 2
            loss_plot_path: models/pons_model1/loss_plot.png
    outs:
    - path: models/pons_model1/loss_plot.png
      md5: f9221e79d3feccf2ec2f4df7471f9e43
      size: 11331
    - path: models/pons_model1/metrics.json
      md5: 39da7a35ab31b73075957e3e66be914b
      size: 157
    - path: models/pons_model1/model
      md5: bbf376674c58843811ca6f8d86981ac0.dir
      size: 697386
      nfiles: 1
    - path: models/pons_model1/pyrovelocity.pkl
      md5: 986fcd4656dd78e807fd7b136afbe0cd
      size: 187726094
    - path: models/pons_model1/run_info.json
      md5: ccbcbccd5844ca861b3ff33b08a2a3b0
      size: 451
    - path: models/pons_model1/trained.h5ad
      md5: 69c629707fc0687278cacbb9cca07a87
      size: 859739291
  train_pons_model2:
    cmd: /usr/bin/time -v python train.py model_training.train=[pons_model2]
    deps:
    - path: data/processed/pons_processed.h5ad
      md5: b34bfedb75377eba646a9bb5b53f5099
      size: 740872455
    - path: train.py
      md5: c866df8072532a9ccd9b9b0a5974fdb4
      size: 8684
    params:
      config.yaml:
        model_training.pons_model2:
          path: models/pons_model2
          model_path: models/pons_model2/model
          input_data_path: data/processed/pons_processed.h5ad
          trained_data_path: models/pons_model2/trained.h5ad
          pyrovelocity_data_path: models/pons_model2/pyrovelocity.pkl
          metrics_path: models/pons_model2/metrics.json
          run_info_path: models/pons_model2/run_info.json
          vector_field_parameters:
            basis: umap
          training_parameters:
            _target_: pyrovelocity.api.train_model
            _partial_: true
            guide_type: auto
            model_type: auto
            svi_train: false
            batch_size: -1
            train_size: 1.0
            use_gpu: 0
            likelihood: Poisson
            num_samples: 30
            log_every: 100
            cell_state: celltype
            patient_improve: 0.0001
            patient_init: 45
            seed: 99
            lr: 0.01
            max_epochs: 2000
            include_prior: true
            library_size: true
            offset: true
            input_type: raw
            cell_specific_kinetics:
            kinetics_num: 2
            loss_plot_path: models/pons_model2/loss_plot.png
    outs:
    - path: models/pons_model2/loss_plot.png
      md5: 78780667ef0761b1e2fe2521492e3336
      size: 11344
    - path: models/pons_model2/metrics.json
      md5: 0868f9faea9612aa5455cbd58ee017e9
      size: 160
    - path: models/pons_model2/model
      md5: cf1b249cd8292dce62d678e2893dc150.dir
      size: 985386
      nfiles: 1
    - path: models/pons_model2/pyrovelocity.pkl
      md5: c4011079f7ee82ca53e272fedaae150a
      size: 188446272
    - path: models/pons_model2/run_info.json
      md5: 8c1ff50fdfbe0051c1065aa1c3d2f34a
      size: 451
    - path: models/pons_model2/trained.h5ad
      md5: 3fc9e620101a47d1dac920e38f6a5626
      size: 859740315
  summarize_pancreas_model1:
    cmd: python summarize.py reports.model_summary.summarize=[pancreas_model1]
    deps:
    - path: models/pancreas_model1/pyrovelocity.pkl
      md5: c48234e73277f5131ea88bb3064a0499
      size: 111752520
    - path: models/pancreas_model1/trained.h5ad
      md5: e77ffea5c0632aeecdf2003a132f6d20
      size: 492580352
    - path: summarize.py
      md5: fc788b41a7fe161e68319b6bc7a55a50
      size: 9584
    params:
      config.yaml:
        model_training.pancreas_model1:
          path: models/pancreas_model1
          model_path: models/pancreas_model1/model
          input_data_path: data/processed/pancreas_processed.h5ad
          trained_data_path: models/pancreas_model1/trained.h5ad
          pyrovelocity_data_path: models/pancreas_model1/pyrovelocity.pkl
          metrics_path: models/pancreas_model1/metrics.json
          run_info_path: models/pancreas_model1/run_info.json
          vector_field_parameters:
            basis: umap
          training_parameters:
            _target_: pyrovelocity.api.train_model
            _partial_: true
            guide_type: auto_t0_constraint
            model_type: auto
            svi_train: false
            batch_size: -1
            train_size: 1.0
            use_gpu: 0
            likelihood: Poisson
            num_samples: 30
            log_every: 100
            cell_state: clusters
            patient_improve: 0.0001
            patient_init: 45
            seed: 99
            lr: 0.01
            max_epochs: 2000
            include_prior: true
            library_size: true
            offset: false
            input_type: raw
            cell_specific_kinetics:
            kinetics_num: 2
            loss_plot_path: models/pancreas_model1/loss_plot.png
        reports.model_summary.pancreas_model1:
          path: reports/pancreas_model1
          dataframe_path: data/processed/pancreas_model1_dataframe.pkl.zst
          shared_time_plot: reports/pancreas_model1/shared_time.pdf
          volcano_plot: reports/pancreas_model1/volcano.pdf
          rainbow_plot: reports/pancreas_model1/rainbow.pdf
          uncertainty_param_plot: reports/pancreas_model1/param_uncertainties.pdf
          vector_field_plot: reports/pancreas_model1/vector_field.pdf
          biomarker_selection_plot: reports/pancreas_model1/markers_selection_scatterplot.tif
          biomarker_phaseportrait_plot: reports/pancreas_model1/markers_phaseportrait.pdf
    outs:
    - path: data/processed/pancreas_model1_dataframe.pkl.zst
      md5: bbff19677beed1c7cf3766506f391723
      size: 12359084
    - path: reports/pancreas_model1/rainbow.pdf
      md5: e02f33a76f537b4c3d287da359f48b71
      size: 673601
    - path: reports/pancreas_model1/rainbow.pdf.png
      md5: 48a79de6b0115442d072fb33e2fb27fd
      size: 2086273
    - path: reports/pancreas_model1/shared_time.pdf
      md5: f32c3793d33f38390c87116317b776a5
      size: 437750
    - path: reports/pancreas_model1/vector_field.pdf
      md5: c7665fb8b907f0360d347f433ce3b60d
      size: 397472
    - path: reports/pancreas_model1/vector_field.pdf.png
      md5: b5a2e8186b2ab2547440582f9751024e
      size: 692177
    - path: reports/pancreas_model1/volcano.pdf
      md5: 34bca63b9c921c7d3e3d5bafb8e1f4dd
      size: 21290
  summarize_pancreas_model2:
    cmd: python summarize.py reports.model_summary.summarize=[pancreas_model2]
    deps:
    - path: models/pancreas_model2/pyrovelocity.pkl
      md5: e47389f48189529518dbb8dfc88959c2
      size: 112472656
    - path: models/pancreas_model2/trained.h5ad
      md5: 8bf34fc00bbc46d950512aa8595844e4
      size: 492567776
    - path: summarize.py
      md5: fc788b41a7fe161e68319b6bc7a55a50
      size: 9584
    params:
      config.yaml:
        model_training.pancreas_model2:
          path: models/pancreas_model2
          model_path: models/pancreas_model2/model
          input_data_path: data/processed/pancreas_processed.h5ad
          trained_data_path: models/pancreas_model2/trained.h5ad
          pyrovelocity_data_path: models/pancreas_model2/pyrovelocity.pkl
          metrics_path: models/pancreas_model2/metrics.json
          run_info_path: models/pancreas_model2/run_info.json
          vector_field_parameters:
            basis: umap
          training_parameters:
            _target_: pyrovelocity.api.train_model
            _partial_: true
            guide_type: auto
            model_type: auto
            svi_train: false
            batch_size: -1
            train_size: 1.0
            use_gpu: 0
            likelihood: Poisson
            num_samples: 30
            log_every: 100
            cell_state: clusters
            patient_improve: 0.0001
            patient_init: 45
            seed: 99
            lr: 0.01
            max_epochs: 2000
            include_prior: true
            library_size: true
            offset: true
            input_type: raw
            cell_specific_kinetics:
            kinetics_num: 2
            loss_plot_path: models/pancreas_model2/loss_plot.png
        reports.model_summary.pancreas_model2:
          path: reports/pancreas_model2
          dataframe_path: data/processed/pancreas_model2_dataframe.pkl.zst
          shared_time_plot: reports/pancreas_model2/shared_time.pdf
          volcano_plot: reports/pancreas_model2/volcano.pdf
          rainbow_plot: reports/pancreas_model2/rainbow.pdf
          uncertainty_param_plot: reports/pancreas_model2/param_uncertainties.pdf
          vector_field_plot: reports/pancreas_model2/vector_field.pdf
          biomarker_selection_plot: reports/pancreas_model2/markers_selection_scatterplot.tif
          biomarker_phaseportrait_plot: reports/pancreas_model2/markers_phaseportrait.pdf
    outs:
    - path: data/processed/pancreas_model2_dataframe.pkl.zst
      md5: bbff19677beed1c7cf3766506f391723
      size: 12359084
    - path: reports/pancreas_model2/rainbow.pdf
      md5: df74ea8ee53e666e363d081487ab4327
      size: 674523
    - path: reports/pancreas_model2/rainbow.pdf.png
      md5: a053e9fbf0755a4fa529e92e3ef03f45
      size: 1592710
    - path: reports/pancreas_model2/shared_time.pdf
      md5: 0477f4a97952a37f00d7461bb6dd253a
      size: 470124
    - path: reports/pancreas_model2/vector_field.pdf
      md5: 81195f34afd9410e03c51fd70db202cc
      size: 397647
    - path: reports/pancreas_model2/vector_field.pdf.png
      md5: 8e8256cf0b1ba9b5aaa88ead3b60d5f7
      size: 697784
    - path: reports/pancreas_model2/volcano.pdf
      md5: bc3a9bf2aab2b24fb9d604fa10d4cda6
      size: 20347
  summarize_pbmc68k_model1:
    cmd: python summarize.py reports.model_summary.summarize=[pbmc68k_model1]
    deps:
    - path: models/pbmc68k_model1/pyrovelocity.pkl
      md5: fe7681af63936fe988ea942b0131fb36
      size: 724018132
    - path: models/pbmc68k_model1/trained.h5ad
      md5: 529f8a38f96a77bbec3c3632c4efefeb
      size: 2437840906
    - path: summarize.py
      md5: fc788b41a7fe161e68319b6bc7a55a50
      size: 9584
    params:
      config.yaml:
        model_training.pbmc68k_model1:
          path: models/pbmc68k_model1
          model_path: models/pbmc68k_model1/model
          input_data_path: data/processed/pbmc68k_processed.h5ad
          trained_data_path: models/pbmc68k_model1/trained.h5ad
          pyrovelocity_data_path: models/pbmc68k_model1/pyrovelocity.pkl
          metrics_path: models/pbmc68k_model1/metrics.json
          run_info_path: models/pbmc68k_model1/run_info.json
          vector_field_parameters:
            basis: tsne
          training_parameters:
            _target_: pyrovelocity.api.train_model
            _partial_: true
            guide_type: auto_t0_constraint
            model_type: auto
            svi_train: false
            batch_size: -1
            train_size: 1.0
            use_gpu: 0
            likelihood: Poisson
            num_samples: 30
            log_every: 100
            cell_state: celltype
            patient_improve: 0.0001
            patient_init: 45
            seed: 99
            lr: 0.01
            max_epochs: 2000
            include_prior: true
            library_size: true
            offset: false
            input_type: raw
            cell_specific_kinetics:
            kinetics_num: 2
            loss_plot_path: models/pbmc68k_model1/loss_plot.png
        reports.model_summary.pbmc68k_model1:
          path: reports/pbmc68k_model1
          dataframe_path: data/processed/pbmc68k_model1_dataframe.pkl.zst
          shared_time_plot: reports/pbmc68k_model1/shared_time.pdf
          volcano_plot: reports/pbmc68k_model1/volcano.pdf
          rainbow_plot: reports/pbmc68k_model1/rainbow.pdf
          uncertainty_param_plot: reports/pbmc68k_model1/param_uncertainties.pdf
          vector_field_plot: reports/pbmc68k_model1/vector_field.pdf
          biomarker_selection_plot: reports/pbmc68k_model1/markers_selection_scatterplot.tif
          biomarker_phaseportrait_plot: reports/pbmc68k_model1/markers_phaseportrait.pdf
    outs:
    - path: data/processed/pbmc68k_model1_dataframe.pkl.zst
      md5: ab5d52e865016970c4ce4d119b8a7d76
      size: 36404588
    - path: reports/pbmc68k_model1/rainbow.pdf
      md5: a3edbdb1bf417aa07bb5e4f0f2e55691
      size: 11048112
    - path: reports/pbmc68k_model1/rainbow.pdf.png
      md5: 44c9921caa21c6bd8cb97ed8a56c88e7
      size: 1331117
    - path: reports/pbmc68k_model1/shared_time.pdf
      md5: d9d55d71e4fea13d4a784b5ce734a6dc
      size: 360278
    - path: reports/pbmc68k_model1/vector_field.pdf
      md5: 10bf1d2207893669109e7915a5b2b83a
      size: 1034005
    - path: reports/pbmc68k_model1/vector_field.pdf.png
      md5: 59d41916ab64cc94a094be66cf3509f6
      size: 1187895
    - path: reports/pbmc68k_model1/volcano.pdf
      md5: 7b12df92035abed3fa07a07af94c021c
      size: 23088
  summarize_pbmc68k_model2:
    cmd: python summarize.py reports.model_summary.summarize=[pbmc68k_model2]
    deps:
    - path: models/pbmc68k_model2/pyrovelocity.pkl
      md5: 51b6e251fff5481399746326fe165657
      size: 320496178
    - path: models/pbmc68k_model2/trained.h5ad
      md5: 7b9d6a7252c60c01a97f9796fcad1925
      size: 2250684777
    - path: summarize.py
      md5: fc788b41a7fe161e68319b6bc7a55a50
      size: 9584
    params:
      config.yaml:
        model_training.pbmc68k_model2:
          path: models/pbmc68k_model2
          model_path: models/pbmc68k_model2/model
          input_data_path: data/processed/pbmc68k_processed.h5ad
          trained_data_path: models/pbmc68k_model2/trained.h5ad
          pyrovelocity_data_path: models/pbmc68k_model2/pyrovelocity.pkl
          metrics_path: models/pbmc68k_model2/metrics.json
          run_info_path: models/pbmc68k_model2/run_info.json
          vector_field_parameters:
            basis: tsne
          training_parameters:
            _target_: pyrovelocity.api.train_model
            _partial_: true
            guide_type: auto
            model_type: auto
            svi_train: false
            batch_size: -1
            train_size: 1.0
            use_gpu: 0
            likelihood: Poisson
            num_samples: 30
            log_every: 100
            cell_state: celltype
            patient_improve: 0.0001
            patient_init: 45
            seed: 99
            lr: 0.01
            max_epochs: 2000
            include_prior: true
            library_size: true
            offset: true
            input_type: raw
            cell_specific_kinetics:
            kinetics_num: 2
            loss_plot_path: models/pbmc68k_model2/loss_plot.png
        reports.model_summary.pbmc68k_model2:
          path: reports/pbmc68k_model2
          dataframe_path: data/processed/pbmc68k_model2_dataframe.pkl.zst
          shared_time_plot: reports/pbmc68k_model2/shared_time.pdf
          volcano_plot: reports/pbmc68k_model2/volcano.pdf
          rainbow_plot: reports/pbmc68k_model2/rainbow.pdf
          uncertainty_param_plot: reports/pbmc68k_model2/param_uncertainties.pdf
          vector_field_plot: reports/pbmc68k_model2/vector_field.pdf
          biomarker_selection_plot: reports/pbmc68k_model2/markers_selection_scatterplot.tif
          biomarker_phaseportrait_plot: reports/pbmc68k_model2/markers_phaseportrait.pdf
    outs:
    - path: data/processed/pbmc68k_model2_dataframe.pkl.zst
      md5: ab5d52e865016970c4ce4d119b8a7d76
      size: 36404588
    - path: reports/pbmc68k_model2/rainbow.pdf
      md5: 2c3e1bfe3ddf42809d069593a0050dc3
      size: 11383839
    - path: reports/pbmc68k_model2/rainbow.pdf.png
      md5: 8b5fc5391a9545c3c29eb2c41f502456
      size: 2312149
    - path: reports/pbmc68k_model2/shared_time.pdf
      md5: 9fde2da702c2e930936a0298dc043a68
      size: 367630
    - path: reports/pbmc68k_model2/vector_field.pdf
      md5: 264be1c77aa69fb9820825dc36692513
      size: 1033559
    - path: reports/pbmc68k_model2/vector_field.pdf.png
      md5: be3e5aed280a9be88c7fdeb478ba2f3d
      size: 1196274
    - path: reports/pbmc68k_model2/volcano.pdf
      md5: d78addbb6bd9c15f0a4fbbb7daacdfb8
      size: 20449
  summarize_pons_model1:
    cmd: python summarize.py reports.model_summary.summarize=[pons_model1]
    deps:
    - path: models/pons_model1/pyrovelocity.pkl
      md5: 986fcd4656dd78e807fd7b136afbe0cd
      size: 187726094
    - path: models/pons_model1/trained.h5ad
      md5: 69c629707fc0687278cacbb9cca07a87
      size: 859739291
    - path: summarize.py
      md5: fc788b41a7fe161e68319b6bc7a55a50
      size: 9584
    params:
      config.yaml:
        model_training.pons_model1:
          path: models/pons_model1
          model_path: models/pons_model1/model
          input_data_path: data/processed/pons_processed.h5ad
          trained_data_path: models/pons_model1/trained.h5ad
          pyrovelocity_data_path: models/pons_model1/pyrovelocity.pkl
          metrics_path: models/pons_model1/metrics.json
          run_info_path: models/pons_model1/run_info.json
          vector_field_parameters:
            basis: umap
          training_parameters:
            _target_: pyrovelocity.api.train_model
            _partial_: true
            guide_type: auto_t0_constraint
            model_type: auto
            svi_train: false
            batch_size: -1
            train_size: 1.0
            use_gpu: 0
            likelihood: Poisson
            num_samples: 30
            log_every: 100
            cell_state: celltype
            patient_improve: 0.0001
            patient_init: 45
            seed: 99
            lr: 0.01
            max_epochs: 2000
            include_prior: true
            library_size: true
            offset: false
            input_type: raw
            cell_specific_kinetics:
            kinetics_num: 2
            loss_plot_path: models/pons_model1/loss_plot.png
        reports.model_summary.pons_model1:
          path: reports/pons_model1
          dataframe_path: data/processed/pons_model1_dataframe.pkl.zst
          shared_time_plot: reports/pons_model1/shared_time.pdf
          volcano_plot: reports/pons_model1/volcano.pdf
          rainbow_plot: reports/pons_model1/rainbow.pdf
          uncertainty_param_plot: reports/pons_model1/param_uncertainties.pdf
          vector_field_plot: reports/pons_model1/vector_field.pdf
          biomarker_selection_plot: reports/pons_model1/markers_selection_scatterplot.tif
          biomarker_phaseportrait_plot: reports/pons_model1/markers_phaseportrait.pdf
    outs:
    - path: data/processed/pons_model1_dataframe.pkl.zst
      md5: b17eb7eaadc357d32ae68e3c30ee33f4
      size: 20173882
    - path: reports/pons_model1/rainbow.pdf
      md5: 2e4fc245c702b63d91aaf005a75f9bbe
      size: 1055211
    - path: reports/pons_model1/rainbow.pdf.png
      md5: 5849a1d785f56ad9945bef447f1ef384
      size: 988477
    - path: reports/pons_model1/shared_time.pdf
      md5: 6bf088e938dd45c29042283ac7ab10a7
      size: 542703
    - path: reports/pons_model1/vector_field.pdf
      md5: 184b443572a1a3f57084efe000299442
      size: 376801
    - path: reports/pons_model1/vector_field.pdf.png
      md5: f38be7261e92a76819e7755e337a54c4
      size: 789159
    - path: reports/pons_model1/volcano.pdf
      md5: 930397547610fde033091bdf1116661d
      size: 20392
  summarize_pons_model2:
    cmd: python summarize.py reports.model_summary.summarize=[pons_model2]
    deps:
    - path: models/pons_model2/pyrovelocity.pkl
      md5: c4011079f7ee82ca53e272fedaae150a
      size: 188446272
    - path: models/pons_model2/trained.h5ad
      md5: 3fc9e620101a47d1dac920e38f6a5626
      size: 859740315
    - path: summarize.py
      md5: fc788b41a7fe161e68319b6bc7a55a50
      size: 9584
    params:
      config.yaml:
        model_training.pons_model2:
          path: models/pons_model2
          model_path: models/pons_model2/model
          input_data_path: data/processed/pons_processed.h5ad
          trained_data_path: models/pons_model2/trained.h5ad
          pyrovelocity_data_path: models/pons_model2/pyrovelocity.pkl
          metrics_path: models/pons_model2/metrics.json
          run_info_path: models/pons_model2/run_info.json
          vector_field_parameters:
            basis: umap
          training_parameters:
            _target_: pyrovelocity.api.train_model
            _partial_: true
            guide_type: auto
            model_type: auto
            svi_train: false
            batch_size: -1
            train_size: 1.0
            use_gpu: 0
            likelihood: Poisson
            num_samples: 30
            log_every: 100
            cell_state: celltype
            patient_improve: 0.0001
            patient_init: 45
            seed: 99
            lr: 0.01
            max_epochs: 2000
            include_prior: true
            library_size: true
            offset: true
            input_type: raw
            cell_specific_kinetics:
            kinetics_num: 2
            loss_plot_path: models/pons_model2/loss_plot.png
        reports.model_summary.pons_model2:
          path: reports/pons_model2
          dataframe_path: data/processed/pons_model2_dataframe.pkl.zst
          shared_time_plot: reports/pons_model2/shared_time.pdf
          volcano_plot: reports/pons_model2/volcano.pdf
          rainbow_plot: reports/pons_model2/rainbow.pdf
          uncertainty_param_plot: reports/pons_model2/param_uncertainties.pdf
          vector_field_plot: reports/pons_model2/vector_field.pdf
          biomarker_selection_plot: reports/pons_model2/markers_selection_scatterplot.tif
          biomarker_phaseportrait_plot: reports/pons_model2/markers_phaseportrait.pdf
    outs:
    - path: data/processed/pons_model2_dataframe.pkl.zst
      md5: b17eb7eaadc357d32ae68e3c30ee33f4
      size: 20173882
    - path: reports/pons_model2/rainbow.pdf
      md5: ca9a8d144be81bf86d933e3ee18f480e
      size: 1079005
    - path: reports/pons_model2/rainbow.pdf.png
      md5: bad7afd11e2404c13ce0d65348de117b
      size: 960916
    - path: reports/pons_model2/shared_time.pdf
      md5: fbcc161d241fb14c98a2cf2bf18899cb
      size: 559935
    - path: reports/pons_model2/vector_field.pdf
      md5: 73b61e773ad1655303fcb58052b22894
      size: 377120
    - path: reports/pons_model2/vector_field.pdf.png
      md5: 2dbac0604c27177de808c900e34c1e2d
      size: 799077
    - path: reports/pons_model2/volcano.pdf
      md5: 645de3cefb5e4c8a4c1b90788e0690fb
      size: 21547
  data_download_simulate:
    cmd: python data_download.py data_external.sources=[simulate] data_external.simulate.download=[medium]
    deps:
    - path: data_download.py
      md5: 30f38cc794cbf4caad2675ffd88c2467
      size: 3305
    params:
      config.yaml:
        base:
          log_level: INFO
        data_external.simulate.medium:
          data_file: simulated_medium.h5ad
          dl_root: data/external
          dl_path: data/external/simulated_medium.h5ad
          rel_path: data/external/simulated_medium.h5ad
          url: https://storage.googleapis.com/pyrovelocity/data/simulated_medium.h5ad
          derived:
            process_method: load_data
            process_args: {}
            rel_path: data/processed/simulated_medium_processed.h5ad
    outs:
    - path: data/external/simulated_medium.h5ad
      md5: c8483b84bd68f57acb407f715f807f9e
      size: 60248568
  preprocess_simulate:
    cmd: python preprocess.py data_external.sources=[simulate] data_external.simulate.process=[medium]
    deps:
    - path: data/external/simulated_medium.h5ad
      md5: c8483b84bd68f57acb407f715f807f9e
      size: 60248568
    - path: preprocess.py
      md5: bf09c86fc25b1d1a98b9aa1c5fa04361
      size: 2757
    params:
      config.yaml:
        base:
          log_level: INFO
        data_external.simulate.medium:
          data_file: simulated_medium.h5ad
          dl_root: data/external
          dl_path: data/external/simulated_medium.h5ad
          rel_path: data/external/simulated_medium.h5ad
          url: https://storage.googleapis.com/pyrovelocity/data/simulated_medium.h5ad
          derived:
            process_method: load_data
            process_args: {}
            rel_path: data/processed/simulated_medium_processed.h5ad
    outs:
    - path: data/processed/simulated_medium_processed.h5ad
      md5: a3b043f214bc630880e0882c802ee2f6
      size: 257351792
  train_simulate_model2:
    cmd: /usr/bin/time -v python train.py model_training.train=[simulate_model2]
    deps:
    - path: data/processed/simulated_medium_processed.h5ad
      md5: 63c9bcb761899f90b7430c13f20985aa
      size: 257351792
    - path: train.py
      md5: c866df8072532a9ccd9b9b0a5974fdb4
      size: 8684
    params:
      config.yaml:
        model_training.simulate_model2:
          path: models/medium_model2
          model_path: models/medium_model2/model
          input_data_path: data/processed/simulated_medium_processed.h5ad
          trained_data_path: models/medium_model2/trained.h5ad
          pyrovelocity_data_path: models/medium_model2/pyrovelocity.pkl
          metrics_path: models/medium_model2/metrics.json
          run_info_path: models/medium_model2/run_info.json
          vector_field_parameters:
            basis: umap
          training_parameters:
            _target_: pyrovelocity.api.train_model
            _partial_: true
            guide_type: auto
            model_type: auto
            svi_train: false
            batch_size: -1
            train_size: 1.0
            use_gpu: 0
            likelihood: Poisson
            num_samples: 30
            log_every: 100
            cell_state: leiden
            patient_improve: 0.0001
            patient_init: 45
            seed: 99
            lr: 0.01
            max_epochs: 4000
            include_prior: true
            library_size: true
            offset: true
            input_type: raw
            cell_specific_kinetics:
            kinetics_num: 2
            loss_plot_path: models/medium_model2/loss_plot.png
    outs:
    - path: models/medium_model2/loss_plot.png
      md5: 77cb69bc1f4e1de9ef25957ccb66fe2f
      size: 10825
    - path: models/medium_model2/metrics.json
      md5: 2f6cc8376db1790c0bbb2df4530ed771
      size: 159
    - path: models/medium_model2/model
      md5: b281938b6410aae7abddf632a67e4960.dir
      size: 487274
      nfiles: 1
    - path: models/medium_model2/pyrovelocity.pkl
      md5: 2d1f48b108fd5ed60e72788eed8e46f0
      size: 48113627
    - path: models/medium_model2/run_info.json
      md5: e9d8088556f7e8b197347685c69cc590
      size: 455
    - path: models/medium_model2/trained.h5ad
      md5: 5772ae621e3eece273bc9493f75664c2
      size: 283925624
  train_simulate_model1:
    cmd: /usr/bin/time -v python train.py model_training.train=[simulate_model1]
    deps:
    - path: data/processed/simulated_medium_processed.h5ad
      md5: 63c9bcb761899f90b7430c13f20985aa
      size: 257351792
    - path: train.py
      md5: c866df8072532a9ccd9b9b0a5974fdb4
      size: 8684
    params:
      config.yaml:
        model_training.simulate_model1:
          path: models/medium_model1
          model_path: models/medium_model1/model
          input_data_path: data/processed/simulated_medium_processed.h5ad
          trained_data_path: models/medium_model1/trained.h5ad
          pyrovelocity_data_path: models/medium_model1/pyrovelocity.pkl
          metrics_path: models/medium_model1/metrics.json
          run_info_path: models/medium_model1/run_info.json
          vector_field_parameters:
            basis: umap
          training_parameters:
            _target_: pyrovelocity.api.train_model
            _partial_: true
            guide_type: auto_t0_constraint
            model_type: auto
            svi_train: false
            batch_size: -1
            train_size: 1.0
            use_gpu: 0
            likelihood: Poisson
            num_samples: 30
            log_every: 100
            cell_state: leiden
            patient_improve: 0.0001
            patient_init: 45
            seed: 99
            lr: 0.01
            max_epochs: 4000
            include_prior: true
            library_size: true
            offset: false
            input_type: raw
            cell_specific_kinetics:
            kinetics_num: 2
            loss_plot_path: models/medium_model1/loss_plot.png
    outs:
    - path: models/medium_model1/loss_plot.png
      md5: 63f564801f73360c48d0aba7ddd9ab90
      size: 10649
    - path: models/medium_model1/metrics.json
      md5: e20e88a9046cd72ea643ac092eb18a38
      size: 159
    - path: models/medium_model1/model
      md5: 093a9b0c038e3ddca3372f5e534638fb.dir
      size: 343338
      nfiles: 1
    - path: models/medium_model1/pyrovelocity.pkl
      md5: 4108204c0f84f32ff518e9923d0e1f7b
      size: 47753465
    - path: models/medium_model1/run_info.json
      md5: fecf15bebf786799b8b770ffd5e7d768
      size: 455
    - path: models/medium_model1/trained.h5ad
      md5: b90af3a5697f284fec0f13a8925e1ace
      size: 283925496
  summarize_simulate_model1:
    cmd: python summarize.py reports.model_summary.summarize=[simulate_model1]
    deps:
    - path: models/medium_model1/pyrovelocity.pkl
      md5: 4108204c0f84f32ff518e9923d0e1f7b
      size: 47753465
    - path: models/medium_model1/trained.h5ad
      md5: b90af3a5697f284fec0f13a8925e1ace
      size: 283925496
    - path: summarize.py
      md5: fc788b41a7fe161e68319b6bc7a55a50
      size: 9584
    params:
      config.yaml:
        model_training.simulate_model1:
          path: models/medium_model1
          model_path: models/medium_model1/model
          input_data_path: data/processed/simulated_medium_processed.h5ad
          trained_data_path: models/medium_model1/trained.h5ad
          pyrovelocity_data_path: models/medium_model1/pyrovelocity.pkl
          metrics_path: models/medium_model1/metrics.json
          run_info_path: models/medium_model1/run_info.json
          vector_field_parameters:
            basis: umap
          training_parameters:
            _target_: pyrovelocity.api.train_model
            _partial_: true
            guide_type: auto_t0_constraint
            model_type: auto
            svi_train: false
            batch_size: -1
            train_size: 1.0
            use_gpu: 0
            likelihood: Poisson
            num_samples: 30
            log_every: 100
            cell_state: leiden
            patient_improve: 0.0001
            patient_init: 45
            seed: 99
            lr: 0.01
            max_epochs: 4000
            include_prior: true
            library_size: true
            offset: false
            input_type: raw
            cell_specific_kinetics:
            kinetics_num: 2
            loss_plot_path: models/medium_model1/loss_plot.png
        reports.model_summary.simulate_model1:
          path: reports/medium_model1
          dataframe_path: data/processed/medium_model1_dataframe.pkl.zst
          shared_time_plot: reports/medium_model1/shared_time.pdf
          volcano_plot: reports/medium_model1/volcano.pdf
          rainbow_plot: reports/medium_model1/rainbow.pdf
          uncertainty_param_plot: reports/medium_model1/param_uncertainties.pdf
          vector_field_plot: reports/medium_model1/vector_field.pdf
          biomarker_selection_plot: reports/medium_model1/markers_selection_scatterplot.tif
          biomarker_phaseportrait_plot: reports/medium_model1/markers_phaseportrait.pdf
    outs:
    - path: data/processed/medium_model1_dataframe.pkl.zst
      md5: 12e544a30c6d793d04f0a48245d309c8
      size: 5068789
    - path: reports/medium_model1/rainbow.pdf
      md5: 97c79f59589eb4b739ebe79b1d684970
      size: 415343
    - path: reports/medium_model1/rainbow.pdf.png
      md5: e2a988c1b94ccac347654758176abb1c
      size: 709724
    - path: reports/medium_model1/shared_time.pdf
      md5: 4f99b9e43cb4ac2a6570bd8fcd9d01ce
      size: 192600
    - path: reports/medium_model1/vector_field.pdf
      md5: f82026c2b54d5349fa70f90581f21841
      size: 202635
    - path: reports/medium_model1/vector_field.pdf.png
      md5: 9671b4e3d88e3da48e7d53fd3113d3e9
      size: 501939
    - path: reports/medium_model1/volcano.pdf
      md5: 88f53c508f7b64e2d456874d75c367dd
      size: 20552
  summarize_simulate_model2:
    cmd: python summarize.py reports.model_summary.summarize=[simulate_model2]
    deps:
    - path: models/medium_model2/pyrovelocity.pkl
      md5: 2d1f48b108fd5ed60e72788eed8e46f0
      size: 48113627
    - path: models/medium_model2/trained.h5ad
      md5: 5772ae621e3eece273bc9493f75664c2
      size: 283925624
    - path: summarize.py
      md5: fc788b41a7fe161e68319b6bc7a55a50
      size: 9584
    params:
      config.yaml:
        model_training.simulate_model2:
          path: models/medium_model2
          model_path: models/medium_model2/model
          input_data_path: data/processed/simulated_medium_processed.h5ad
          trained_data_path: models/medium_model2/trained.h5ad
          pyrovelocity_data_path: models/medium_model2/pyrovelocity.pkl
          metrics_path: models/medium_model2/metrics.json
          run_info_path: models/medium_model2/run_info.json
          vector_field_parameters:
            basis: umap
          training_parameters:
            _target_: pyrovelocity.api.train_model
            _partial_: true
            guide_type: auto
            model_type: auto
            svi_train: false
            batch_size: -1
            train_size: 1.0
            use_gpu: 0
            likelihood: Poisson
            num_samples: 30
            log_every: 100
            cell_state: leiden
            patient_improve: 0.0001
            patient_init: 45
            seed: 99
            lr: 0.01
            max_epochs: 4000
            include_prior: true
            library_size: true
            offset: true
            input_type: raw
            cell_specific_kinetics:
            kinetics_num: 2
            loss_plot_path: models/medium_model2/loss_plot.png
        reports.model_summary.simulate_model2:
          path: reports/medium_model2
          dataframe_path: data/processed/medium_model2_dataframe.pkl.zst
          shared_time_plot: reports/medium_model2/shared_time.pdf
          volcano_plot: reports/medium_model2/volcano.pdf
          rainbow_plot: reports/medium_model2/rainbow.pdf
          uncertainty_param_plot: reports/medium_model2/param_uncertainties.pdf
          vector_field_plot: reports/medium_model2/vector_field.pdf
          biomarker_selection_plot: reports/medium_model2/markers_selection_scatterplot.tif
          biomarker_phaseportrait_plot: reports/medium_model2/markers_phaseportrait.pdf
    outs:
    - path: data/processed/medium_model2_dataframe.pkl.zst
      md5: 12e544a30c6d793d04f0a48245d309c8
      size: 5068789
    - path: reports/medium_model2/rainbow.pdf
      md5: 64ada4f910308d33eb4832d8835e9bb2
      size: 463594
    - path: reports/medium_model2/rainbow.pdf.png
      md5: e732a7a5a4fb3f7cf695a7883b6563f7
      size: 993907
    - path: reports/medium_model2/shared_time.pdf
      md5: 06c941d026d1edf709a37f0f4c8b4e96
      size: 204658
    - path: reports/medium_model2/vector_field.pdf
      md5: 65415971c12e232809c144d38833ee25
      size: 204699
    - path: reports/medium_model2/vector_field.pdf.png
      md5: 2b46c0b6d0c7aec6b807e0c89635362a
      size: 506131
    - path: reports/medium_model2/volcano.pdf
      md5: 35f1ec3bd008d9b04fdd6f0e330f0c3a
      size: 19644
  preprocess_larry:
    cmd: python preprocess.py data_external.sources=[pyrovelocity] data_external.pyrovelocity.process=[larry]
    deps:
    - path: data/external/larry.h5ad
      md5: d618305c0ee0e41570b1147e63df332a
      size: 1525338690
    - path: preprocess.py
      md5: bf09c86fc25b1d1a98b9aa1c5fa04361
      size: 2757
    params:
      config.yaml:
        base:
          log_level: INFO
        data_external.pyrovelocity.larry:
          data_file: larry.h5ad
          dl_root: data/external
          dl_path: data/external/larry.h5ad
          rel_path: data/external/larry.h5ad
          url: https://ndownloader.figshare.com/files/37028569
          derived:
            process_method: load_data
            process_args: {}
            rel_path: data/processed/larry_processed.h5ad
    outs:
    - path: data/processed/larry_processed.h5ad
      md5: b560530dc084582b04c57cba7bcb07e7
      size: 5361832686
  train_larry_model2:
    cmd: /usr/bin/time -v python train.py model_training.train=[larry_model2]
    deps:
    - path: data/processed/larry_processed.h5ad
      md5: aaccdd2ed8713ce1e1b1aa078993a75c
      size: 5361832686
    - path: train.py
      md5: c866df8072532a9ccd9b9b0a5974fdb4
      size: 8684
    params:
      config.yaml:
        model_training.larry_model2:
          path: models/larry_model2
          model_path: models/larry_model2/model
          input_data_path: data/processed/larry_processed.h5ad
          trained_data_path: models/larry_model2/trained.h5ad
          pyrovelocity_data_path: models/larry_model2/pyrovelocity.pkl
          metrics_path: models/larry_model2/metrics.json
          run_info_path: models/larry_model2/run_info.json
          vector_field_parameters:
            basis: emb
          training_parameters:
            _target_: pyrovelocity.api.train_model
            _partial_: true
            guide_type: auto
            model_type: auto
            svi_train: true
            batch_size: 4000
            train_size: 1.0
            use_gpu: 0
            likelihood: Poisson
            num_samples: 30
            log_every: 100
            cell_state: state_info
            patient_improve: 0.0001
            patient_init: 45
            seed: 99
            lr: 0.01
            max_epochs: 1000
            include_prior: true
            library_size: true
            offset: true
            input_type: raw
            cell_specific_kinetics:
            kinetics_num: 2
            loss_plot_path: models/larry_model2/loss_plot.png
    outs:
    - path: models/larry_model2/loss_plot.png
      md5: d86e765e57aa53a4573ff10de3822ea7
      size: 11622
    - path: models/larry_model2/metrics.json
      md5: c16901f655f254b96cfb738a5b239850
      size: 159
    - path: models/larry_model2/model
      md5: f16ffe49f9c33a12773b541d7147ffd6.dir
      size: 2050986
      nfiles: 1
    - path: models/larry_model2/pyrovelocity.pkl
      md5: f2506ec58d39242340c1161bdbe0fa41
      size: 1467519359
    - path: models/larry_model2/run_info.json
      md5: 3db64da17d38599035ac9ff7da18675b
      size: 452
    - path: models/larry_model2/trained.h5ad
      md5: 2792fddaa89e554d8dc01a2b28429dff
      size: 6327389534
  data_download_larry_neu:
    cmd: python data_download.py data_external.sources=[pyrovelocity] data_external.pyrovelocity.download=[larry_neu]
    deps:
    - path: data_download.py
      md5: 30f38cc794cbf4caad2675ffd88c2467
      size: 3305
    params:
      config.yaml:
        base:
          log_level: INFO
        data_external.pyrovelocity.larry_neu:
          data_file: larry_neu.h5ad
          dl_root: data/external
          dl_path: data/external/larry_neu.h5ad
          rel_path: data/external/larry_neu.h5ad
          url: https://ndownloader.figshare.com/files/37028575
          derived:
            process_method: load_data
            process_args: {}
            rel_path: data/processed/larry_neu_processed.h5ad
    outs:
    - path: data/external/larry_neu.h5ad
      md5: 3192e2fe89d64f5d0d158c0e7d26c79d
      size: 60008807
  preprocess_larry_neu:
    cmd: python preprocess.py data_external.sources=[pyrovelocity] data_external.pyrovelocity.process=[larry_neu]
    deps:
    - path: data/external/larry_neu.h5ad
      md5: 3192e2fe89d64f5d0d158c0e7d26c79d
      size: 60008807
    - path: preprocess.py
      md5: bf09c86fc25b1d1a98b9aa1c5fa04361
      size: 2757
    params:
      config.yaml:
        base:
          log_level: INFO
        data_external.pyrovelocity.larry_neu:
          data_file: larry_neu.h5ad
          dl_root: data/external
          dl_path: data/external/larry_neu.h5ad
          rel_path: data/external/larry_neu.h5ad
          url: https://ndownloader.figshare.com/files/37028575
          derived:
            process_method: load_data
            process_args: {}
            rel_path: data/processed/larry_neu_processed.h5ad
    outs:
    - path: data/processed/larry_neu_processed.h5ad
      md5: 8eee7f5b09ca0e0b9b0dc9b336885b9f
      size: 92577960
  data_download_larry_mono:
    cmd: python data_download.py data_external.sources=[pyrovelocity] data_external.pyrovelocity.download=[larry_mono]
    deps:
    - path: data_download.py
      md5: 30f38cc794cbf4caad2675ffd88c2467
      size: 3305
    params:
      config.yaml:
        base:
          log_level: INFO
        data_external.pyrovelocity.larry_mono:
          data_file: larry_mono.h5ad
          dl_root: data/external
          dl_path: data/external/larry_mono.h5ad
          rel_path: data/external/larry_mono.h5ad
          url: https://ndownloader.figshare.com/files/37028572
          derived:
            process_method: load_data
            process_args: {}
            rel_path: data/processed/larry_mono_processed.h5ad
    outs:
    - path: data/external/larry_mono.h5ad
      md5: 01f4e084c37482e26800ba4dfa0202bd
      size: 66173538
  preprocess_larry_mono:
    cmd: python preprocess.py data_external.sources=[pyrovelocity] data_external.pyrovelocity.process=[larry_mono]
    deps:
    - path: data/external/larry_mono.h5ad
      md5: 01f4e084c37482e26800ba4dfa0202bd
      size: 66173538
    - path: preprocess.py
      md5: bf09c86fc25b1d1a98b9aa1c5fa04361
      size: 2757
    params:
      config.yaml:
        base:
          log_level: INFO
        data_external.pyrovelocity.larry_mono:
          data_file: larry_mono.h5ad
          dl_root: data/external
          dl_path: data/external/larry_mono.h5ad
          rel_path: data/external/larry_mono.h5ad
          url: https://ndownloader.figshare.com/files/37028572
          derived:
            process_method: load_data
            process_args: {}
            rel_path: data/processed/larry_mono_processed.h5ad
    outs:
    - path: data/processed/larry_mono_processed.h5ad
      md5: 4a353550e390ae129fe6303e9e72229b
      size: 112022616
  train_larry_mono_model2:
    cmd: /usr/bin/time -v python train.py model_training.train=[larry_mono_model2]
    deps:
    - path: data/processed/larry_mono_processed.h5ad
      md5: 4a353550e390ae129fe6303e9e72229b
      size: 112022616
    - path: train.py
      md5: c866df8072532a9ccd9b9b0a5974fdb4
      size: 8684
    params:
      config.yaml:
        model_training.larry_mono_model2:
          path: models/larry_mono_model2
          model_path: models/larry_mono_model2/model
          input_data_path: data/processed/larry_mono_processed.h5ad
          trained_data_path: models/larry_mono_model2/trained.h5ad
          pyrovelocity_data_path: models/larry_mono_model2/pyrovelocity.pkl
          metrics_path: models/larry_mono_model2/metrics.json
          run_info_path: models/larry_mono_model2/run_info.json
          vector_field_parameters:
            basis: emb
          training_parameters:
            _target_: pyrovelocity.api.train_model
            _partial_: true
            guide_type: auto
            model_type: auto
            svi_train: true
            batch_size: 4000
            train_size: 1.0
            use_gpu: 0
            likelihood: Poisson
            num_samples: 30
            log_every: 100
            cell_state: state_info
            patient_improve: 0.0001
            patient_init: 45
            seed: 99
            lr: 0.01
            max_epochs: 1000
            include_prior: true
            library_size: true
            offset: true
            input_type: raw
            cell_specific_kinetics:
            kinetics_num: 2
            loss_plot_path: models/larry_mono_model2/loss_plot.png
    outs:
    - path: models/larry_mono_model2/loss_plot.png
      md5: f23ab1572ee231091d47932e4f21c2bf
      size: 11422
    - path: models/larry_mono_model2/metrics.json
      md5: 692ec5b6b9e5d697072a4b3345c0eb0c
      size: 160
    - path: models/larry_mono_model2/model
      md5: dbe5ab2b9595349e1ef335aa607221d4.dir
      size: 602090
      nfiles: 1
    - path: models/larry_mono_model2/pyrovelocity.pkl
      md5: 4952098580fa5c337b756b6de4233f24
      size: 16839707
    - path: models/larry_mono_model2/run_info.json
      md5: 633284b7513648e620cef2cc648c8690
      size: 457
    - path: models/larry_mono_model2/trained.h5ad
      md5: 916fe17275039172797fec23a7376670
      size: 127286200
  train_larry_neu_model2:
    cmd: /usr/bin/time -v python train.py model_training.train=[larry_neu_model2]
    deps:
    - path: data/processed/larry_neu_processed.h5ad
      md5: 8eee7f5b09ca0e0b9b0dc9b336885b9f
      size: 92577960
    - path: train.py
      md5: c866df8072532a9ccd9b9b0a5974fdb4
      size: 8684
    params:
      config.yaml:
        model_training.larry_neu_model2:
          path: models/larry_neu_model2
          model_path: models/larry_neu_model2/model
          input_data_path: data/processed/larry_neu_processed.h5ad
          trained_data_path: models/larry_neu_model2/trained.h5ad
          pyrovelocity_data_path: models/larry_neu_model2/pyrovelocity.pkl
          metrics_path: models/larry_neu_model2/metrics.json
          run_info_path: models/larry_neu_model2/run_info.json
          vector_field_parameters:
            basis: emb
          training_parameters:
            _target_: pyrovelocity.api.train_model
            _partial_: true
            guide_type: auto
            model_type: auto
            svi_train: true
            batch_size: 4000
            train_size: 1.0
            use_gpu: 0
            likelihood: Poisson
            num_samples: 30
            log_every: 100
            cell_state: state_info
            patient_improve: 0.0001
            patient_init: 45
            seed: 99
            lr: 0.01
            max_epochs: 1000
            include_prior: true
            library_size: true
            offset: true
            input_type: raw
            cell_specific_kinetics:
            kinetics_num: 2
            loss_plot_path: models/larry_neu_model2/loss_plot.png
    outs:
    - path: models/larry_neu_model2/loss_plot.png
      md5: 8bdab9feb9e4abc8c5d69d8837e9b3cd
      size: 11561
    - path: models/larry_neu_model2/metrics.json
      md5: 165765cf41fae2b2145dd9b007014e01
      size: 158
    - path: models/larry_neu_model2/model
      md5: 12d7572af32bbdc46da593692e030443.dir
      size: 554922
      nfiles: 1
    - path: models/larry_neu_model2/pyrovelocity.pkl
      md5: b98215711fa08cc5fbc447f4e8cbe54c
      size: 14187795
    - path: models/larry_neu_model2/run_info.json
      md5: 5d8ef3ceee70dce030409689f287eda4
      size: 456
    - path: models/larry_neu_model2/trained.h5ad
      md5: f174a255e648f1dfbd5c25bc04328170
      size: 105153380
  preprocess_larry_multilineage:
    cmd: python preprocess.py data_external.sources=[pyrovelocity] data_external.pyrovelocity.process=[larry_multilineage]
    deps:
    - path: data/external/larry_mono.h5ad
      md5: 01f4e084c37482e26800ba4dfa0202bd
      size: 66173538
    - path: data/external/larry_neu.h5ad
      md5: 3192e2fe89d64f5d0d158c0e7d26c79d
      size: 60008807
    - path: preprocess.py
      md5: bf09c86fc25b1d1a98b9aa1c5fa04361
      size: 2757
    params:
      config.yaml:
        base:
          log_level: INFO
        data_external.pyrovelocity.larry_multilineage:
          data_file: larry_mono.h5ad
          dl_root: data/external
          dl_path: data/external/larry_mono.h5ad
          rel_path: data/external/larry_mono.h5ad
          url: https://ndownloader.figshare.com/files/37028572
          derived:
            process_method: load_data
            process_args: {}
            rel_path: data/processed/larry_multilineage_processed.h5ad
    outs:
    - path: data/processed/larry_multilineage_processed.h5ad
      md5: 4a353550e390ae129fe6303e9e72229b
      size: 112022616
  train_larry_multilineage_model2:
    cmd: /usr/bin/time -v python train.py model_training.train=[larry_multilineage_model2]
    deps:
    - path: data/processed/larry_multilineage_processed.h5ad
      md5: 4a353550e390ae129fe6303e9e72229b
      size: 112022616
    - path: train.py
      md5: c866df8072532a9ccd9b9b0a5974fdb4
      size: 8684
    params:
      config.yaml:
        model_training.larry_multilineage_model2:
          path: models/larry_multilineage_model2
          model_path: models/larry_multilineage_model2/model
          input_data_path: data/processed/larry_multilineage_processed.h5ad
          trained_data_path: models/larry_multilineage_model2/trained.h5ad
          pyrovelocity_data_path: models/larry_multilineage_model2/pyrovelocity.pkl
          metrics_path: models/larry_multilineage_model2/metrics.json
          run_info_path: models/larry_multilineage_model2/run_info.json
          vector_field_parameters:
            basis: emb
          training_parameters:
            _target_: pyrovelocity.api.train_model
            _partial_: true
            guide_type: auto
            model_type: auto
            svi_train: true
            batch_size: 4000
            train_size: 1.0
            use_gpu: 0
            likelihood: Poisson
            num_samples: 30
            log_every: 100
            cell_state: state_info
            patient_improve: 0.0001
            patient_init: 45
            seed: 99
            lr: 0.01
            max_epochs: 1000
            include_prior: true
            library_size: true
            offset: true
            input_type: raw
            cell_specific_kinetics:
            kinetics_num: 2
            loss_plot_path: models/larry_multilineage_model2/loss_plot.png
    outs:
    - path: models/larry_multilineage_model2/loss_plot.png
      md5: f23ab1572ee231091d47932e4f21c2bf
      size: 11422
    - path: models/larry_multilineage_model2/metrics.json
      md5: 692ec5b6b9e5d697072a4b3345c0eb0c
      size: 160
    - path: models/larry_multilineage_model2/model
      md5: fd6873cb2fc91d04ec6f5ff32206a028.dir
      size: 602090
      nfiles: 1
    - path: models/larry_multilineage_model2/pyrovelocity.pkl
      md5: 4952098580fa5c337b756b6de4233f24
      size: 16839707
    - path: models/larry_multilineage_model2/run_info.json
      md5: 81d7678008925a029b7e41dd193920cd
      size: 465
    - path: models/larry_multilineage_model2/trained.h5ad
      md5: 398f467dd68812d49c3b38dfbcb8dabf
      size: 127286200
  preprocess_pbmc10k:
    cmd: python preprocess.py data_external.sources=[pyrovelocity] data_external.scvelo.process=[pyrovelocity]
    deps:
    - path: data/external/pbmc10k.h5ad
      md5: 3b64b4cd122454610957f5c6086e2eac
      size: 592149007
    - path: preprocess.py
      md5: bf09c86fc25b1d1a98b9aa1c5fa04361
      size: 2757
    params:
      config.yaml:
        base:
          log_level: INFO
        data_external.pyrovelocity.pbmc10k:
          data_file: pbmc10k.h5ad
          dl_root: data/external
          dl_path: data/external/pbmc10k.h5ad
          rel_path: data/external/pbmc10k.h5ad
          url: https://ndownloader.figshare.com/files/pbmc10k
          derived:
            process_method: load_data
            process_args: {}
            rel_path: data/processed/pbmc10k_processed.h5ad
    outs:
    - path: data/processed/pbmc10k_processed.h5ad
      md5: 795e204da33aa5a9b2ae7e8cd2668527
      size: 1306068803
  train_pbmc10k_model2:
    cmd: /usr/bin/time -v python train.py model_training.train=[pbmc10k_model2]
    deps:
    - path: data/processed/pbmc10k_processed.h5ad
      md5: 795e204da33aa5a9b2ae7e8cd2668527
      size: 1306068803
    - path: train.py
      md5: c866df8072532a9ccd9b9b0a5974fdb4
      size: 8684
    params:
      config.yaml:
        model_training.pbmc10k_model2:
          path: models/pbmc10k_model2
          model_path: models/pbmc10k_model2/model
          input_data_path: data/processed/pbmc10k_processed.h5ad
          trained_data_path: models/pbmc10k_model2/trained.h5ad
          pyrovelocity_data_path: models/pbmc10k_model2/pyrovelocity.pkl
          metrics_path: models/pbmc10k_model2/metrics.json
          run_info_path: models/pbmc10k_model2/run_info.json
          vector_field_parameters:
            basis: tsne
          training_parameters:
            _target_: pyrovelocity.api.train_model
            _partial_: true
            guide_type: auto
            model_type: auto
            svi_train: false
            batch_size: -1
            train_size: 1.0
            use_gpu: 0
            likelihood: Poisson
            num_samples: 30
            log_every: 100
            cell_state: leiden
            patient_improve: 0.0001
            patient_init: 45
            seed: 99
            lr: 0.01
            max_epochs: 2000
            include_prior: true
            library_size: true
            offset: true
            input_type: raw
            cell_specific_kinetics:
            kinetics_num: 2
            loss_plot_path: models/pbmc10k_model2/loss_plot.png
    outs:
    - path: models/pbmc10k_model2/loss_plot.png
      md5: 711249964722e4b0434e4c0eeaf5a78e
      size: 11490
    - path: models/pbmc10k_model2/metrics.json
      md5: b99f5e0312a61a9571f184cd3cf9061c
      size: 159
    - path: models/pbmc10k_model2/model
      md5: 4c23ecd93772c8e48f4ebe764fc84fd8.dir
      size: 1156778
      nfiles: 1
    - path: models/pbmc10k_model2/pyrovelocity.pkl
      md5: 2bc59cb5aee3692f2513da3c1a26f7da
      size: 207371037
    - path: models/pbmc10k_model2/run_info.json
      md5: 763c9c78426d7d79ba1c7a66737296b1
      size: 454
    - path: models/pbmc10k_model2/trained.h5ad
      md5: db93fe92311daf0466b3f23f0443f8ee
      size: 1515911759
  figure2_extras:
    cmd: python fig2/figure_extras.py reports.model_summary.summarize=[pbmc10k_model2,larry_tips_model2,pbmc68k_model2]
    deps:
    - path: fig2/figure_extras.py
      md5: 632a9c3472762b91ca0d2d713edd93ab
      size: 6039
    - path: models/larry_tips_model2/pyrovelocity.pkl
      md5: 52d63551f18a58477150a01d48cbb16f
      size: 323695520
    - path: models/pbmc10k_model2/pyrovelocity.pkl
      md5: 2bc59cb5aee3692f2513da3c1a26f7da
      size: 207371037
    - path: models/pbmc68k_model2/pyrovelocity.pkl
      md5: 51b6e251fff5481399746326fe165657
      size: 320496178
    params:
      config.yaml:
        reports.figure2:
          tag: fig2
          path: reports/fig2
          tif_path: reports/fig2/fig2_raw_gene_selection_model1.tif
          svg_path: reports/fig2/fig2_raw_gene_selection_model1.svg
          biomarker_selection_path: reports/fig2/fig2_markers_selection_scatterplot.tif
          biomarker_phaseportrait_path: reports/fig2/fig2_markers_phaseportrait.pdf
          uncertainty_param_plot_path: reports/fig2/fig2_param_uncertainties.pdf
          uncertainty_magnitude_plot_path: reports/fig2/fig2_magnitude_uncertainties.pdf
          pancreas_model1:
            shared_time_plot: reports/fig2/fig2_pancreas_shared_time.pdf
            volcano_plot: reports/fig2/fig2_pancreas_volcano.pdf
            rainbow_plot: reports/fig2/fig2_pancreas_rainbow.pdf
            vector_field_plot: reports/fig2/fig2_pancreas_vector_field.pdf
    outs:
    - path: reports/fig2/figure2_extras.pdf
      md5: 6849b13f7417618075f646134241ac6d
      size: 181830
  summarize_pbmc10k_model2:
    cmd: python summarize.py reports.model_summary.summarize=[pbmc10k_model2]
    deps:
    - path: models/pbmc10k_model2/pyrovelocity.pkl
      md5: 2bc59cb5aee3692f2513da3c1a26f7da
      size: 207371037
    - path: models/pbmc10k_model2/trained.h5ad
      md5: db93fe92311daf0466b3f23f0443f8ee
      size: 1515911759
    - path: summarize.py
      md5: fc788b41a7fe161e68319b6bc7a55a50
      size: 9584
    params:
      config.yaml:
        model_training.pbmc10k_model2:
          path: models/pbmc10k_model2
          model_path: models/pbmc10k_model2/model
          input_data_path: data/processed/pbmc10k_processed.h5ad
          trained_data_path: models/pbmc10k_model2/trained.h5ad
          pyrovelocity_data_path: models/pbmc10k_model2/pyrovelocity.pkl
          metrics_path: models/pbmc10k_model2/metrics.json
          run_info_path: models/pbmc10k_model2/run_info.json
          vector_field_parameters:
            basis: tsne
          training_parameters:
            _target_: pyrovelocity.api.train_model
            _partial_: true
            guide_type: auto
            model_type: auto
            svi_train: false
            batch_size: -1
            train_size: 1.0
            use_gpu: 0
            likelihood: Poisson
            num_samples: 30
            log_every: 100
            cell_state: leiden
            patient_improve: 0.0001
            patient_init: 45
            seed: 99
            lr: 0.01
            max_epochs: 2000
            include_prior: true
            library_size: true
            offset: true
            input_type: raw
            cell_specific_kinetics:
            kinetics_num: 2
            loss_plot_path: models/pbmc10k_model2/loss_plot.png
        reports.model_summary.pbmc10k_model2:
          path: reports/pbmc10k_model2
          dataframe_path: data/processed/pbmc10k_model2_dataframe.pkl.zst
          shared_time_plot: reports/pbmc10k_model2/shared_time.pdf
          volcano_plot: reports/pbmc10k_model2/volcano.pdf
          rainbow_plot: reports/pbmc10k_model2/rainbow.pdf
          uncertainty_param_plot: reports/pbmc10k_model2/param_uncertainties.pdf
          vector_field_plot: reports/pbmc10k_model2/vector_field.pdf
          biomarker_selection_plot: reports/pbmc10k_model2/markers_selection_scatterplot.tif
          biomarker_phaseportrait_plot: reports/pbmc10k_model2/markers_phaseportrait.pdf
    outs:
    - path: data/processed/pbmc10k_model2_dataframe.pkl.zst
      md5: 6464f86c3b2ed5661778d78c7f11c994
      size: 37856415
    - path: reports/pbmc10k_model2/rainbow.pdf
      md5: 73aa31b36a1cbd3e0024acae18790f71
      size: 2046931
    - path: reports/pbmc10k_model2/rainbow.pdf.png
      md5: df3527785c8544b3ef41ef65bb4a62b5
      size: 1587744
    - path: reports/pbmc10k_model2/shared_time.pdf
      md5: b4910fa55df93f22901c8d7a9844bb85
      size: 411751
    - path: reports/pbmc10k_model2/vector_field.pdf
      md5: be4a82aee46d579741e182c0ef57febd
      size: 505124
    - path: reports/pbmc10k_model2/vector_field.pdf.png
      md5: b4c30a3e92048c70a4292c75f5204e0e
      size: 998164
    - path: reports/pbmc10k_model2/volcano.pdf
      md5: 3fa86e7e4dc78d0c5797b835338a762a
      size: 21236
  data_download_pbmc10k:
    cmd: echo "Reference pbmc10k"
    deps:
    - path: data_download.py
      md5: 30f38cc794cbf4caad2675ffd88c2467
      size: 3305
    params:
      config.yaml:
        base:
          log_level: INFO
        data_external.pyrovelocity.pbmc10k:
          data_file: pbmc10k.h5ad
          dl_root: data/external
          dl_path: data/external/pbmc10k.h5ad
          rel_path: data/external/pbmc10k.h5ad
          url: https://ndownloader.figshare.com/files/pbmc10k
          derived:
            process_method: load_data
            process_args: {}
            rel_path: data/processed/pbmc10k_processed.h5ad
    outs:
    - path: data/external/pbmc10k.h5ad
      md5: 3b64b4cd122454610957f5c6086e2eac
      size: 592149007
  data_download_larry_tips:
    cmd: python data_download.py data_external.sources=[pyrovelocity] data_external.pyrovelocity.download=[larry_tips]
    deps:
    - path: data_download.py
      md5: 30f38cc794cbf4caad2675ffd88c2467
      size: 3305
    params:
      config.yaml:
        base:
          log_level: INFO
        data_external.pyrovelocity.larry_tips:
          data_file: larry_tips.h5ad
          dl_root: data/external
          dl_path: data/external/larry_tips.h5ad
          rel_path: data/external/larry_tips.h5ad
          url: https://ndownloader.figshare.com/files/37028569
          derived:
            process_method: load_data
            process_args: {}
            rel_path: data/processed/larry_tips_processed.h5ad
    outs:
    - path: data/external/larry_tips.h5ad
      md5: d618305c0ee0e41570b1147e63df332a
      size: 1525338690
  preprocess_larry_tips:
    cmd: python preprocess.py data_external.sources=[pyrovelocity] data_external.pyrovelocity.process=[larry_tips]
    deps:
    - path: data/external/larry_tips.h5ad
      md5: d618305c0ee0e41570b1147e63df332a
      size: 1525338690
    - path: preprocess.py
      md5: bf09c86fc25b1d1a98b9aa1c5fa04361
      size: 2757
    params:
      config.yaml:
        base:
          log_level: INFO
        data_external.pyrovelocity.larry_tips:
          data_file: larry_tips.h5ad
          dl_root: data/external
          dl_path: data/external/larry_tips.h5ad
          rel_path: data/external/larry_tips.h5ad
          url: https://ndownloader.figshare.com/files/37028569
          derived:
            process_method: load_data
            process_args: {}
            rel_path: data/processed/larry_tips_processed.h5ad
    outs:
    - path: data/processed/larry_tips_processed.h5ad
      md5: 9a776e794d60642f46df5d27864a68f3
      size: 2026603122
  train_larry_tips_model2:
    cmd: /usr/bin/time -v python train.py model_training.train=[larry_tips_model2]
    deps:
    - path: data/processed/larry_tips_processed.h5ad
      md5: 9a776e794d60642f46df5d27864a68f3
      size: 2026603122
    - path: train.py
      md5: c866df8072532a9ccd9b9b0a5974fdb4
      size: 8722
    params:
      config.yaml:
        model_training.larry_tips_model2:
          path: models/larry_tips_model2
          model_path: models/larry_tips_model2/model
          input_data_path: data/processed/larry_tips_processed.h5ad
          trained_data_path: models/larry_tips_model2/trained.h5ad
          pyrovelocity_data_path: models/larry_tips_model2/pyrovelocity.pkl
          metrics_path: models/larry_tips_model2/metrics.json
          run_info_path: models/larry_tips_model2/run_info.json
          vector_field_parameters:
            basis: umap
          training_parameters:
            _target_: pyrovelocity.api.train_model
            _partial_: true
            guide_type: auto
            model_type: auto
            svi_train: true
            batch_size: 4000
            train_size: 1.0
            use_gpu: 0
            likelihood: Poisson
            num_samples: 30
            log_every: 100
            cell_state: state_info
            patient_improve: 0.0001
            patient_init: 45
            seed: 99
            lr: 0.01
            max_epochs: 1000
            include_prior: true
            library_size: true
            offset: true
            input_type: raw
            cell_specific_kinetics:
            kinetics_num: 2
            loss_plot_path: models/larry_tips_model2/loss_plot.png
    outs:
    - path: models/larry_tips_model2/loss_plot.png
      md5: 630c6d0b5bda3a771e19546b23582a18
      size: 13501
    - path: models/larry_tips_model2/metrics.json
      md5: 57eb4e587e844c1f811dd68887e20717
      size: 152
    - path: models/larry_tips_model2/model
      md5: 12352896c442dabc0d58b7246c883954.dir
      size: 1297258
      nfiles: 1
    - path: models/larry_tips_model2/pyrovelocity.pkl
      md5: 52d63551f18a58477150a01d48cbb16f
      size: 323695520
    - path: models/larry_tips_model2/run_info.json
      md5: 4c4f30b7cb0e8cdfe8390154219f282e
      size: 457
    - path: models/larry_tips_model2/trained.h5ad
      md5: 91e6c0f96a69f7e19b40c464bd478b43
      size: 2366818330
  summarize_larry_tips_model2:
    cmd: python summarize.py reports.model_summary.summarize=[larry_tips_model2]
    deps:
    - path: models/larry_tips_model2/pyrovelocity.pkl
      md5: 52d63551f18a58477150a01d48cbb16f
      size: 323695520
    - path: models/larry_tips_model2/trained.h5ad
      md5: 91e6c0f96a69f7e19b40c464bd478b43
      size: 2366818330
    - path: summarize.py
      md5: d395a6eab97f8b322434852832f216d8
      size: 9469
    params:
      config.yaml:
        model_training.larry_tips_model2:
          path: models/larry_tips_model2
          model_path: models/larry_tips_model2/model
          input_data_path: data/processed/larry_tips_processed.h5ad
          trained_data_path: models/larry_tips_model2/trained.h5ad
          pyrovelocity_data_path: models/larry_tips_model2/pyrovelocity.pkl
          metrics_path: models/larry_tips_model2/metrics.json
          run_info_path: models/larry_tips_model2/run_info.json
          vector_field_parameters:
            basis: umap
          training_parameters:
            _target_: pyrovelocity.api.train_model
            _partial_: true
            guide_type: auto
            model_type: auto
            svi_train: true
            batch_size: 4000
            train_size: 1.0
            use_gpu: 0
            likelihood: Poisson
            num_samples: 30
            log_every: 100
            cell_state: state_info
            patient_improve: 0.0001
            patient_init: 45
            seed: 99
            lr: 0.01
            max_epochs: 1000
            include_prior: true
            library_size: true
            offset: true
            input_type: raw
            cell_specific_kinetics:
            kinetics_num: 2
            loss_plot_path: models/larry_tips_model2/loss_plot.png
        reports.model_summary.larry_tips_model2:
          path: reports/larry_tips_model2
          dataframe_path: data/processed/larry_tips_model2_dataframe.pkl.zst
          shared_time_plot: reports/larry_tips_model2/shared_time.pdf
          volcano_plot: reports/larry_tips_model2/volcano.pdf
          rainbow_plot: reports/larry_tips_model2/rainbow.pdf
          uncertainty_param_plot: reports/larry_tips_model2/param_uncertainties.pdf
          vector_field_plot: reports/larry_tips_model2/vector_field.pdf
          biomarker_selection_plot: reports/larry_tips_model2/markers_selection_scatterplot.tif
          biomarker_phaseportrait_plot: reports/larry_tips_model2/markers_phaseportrait.pdf
    outs:
    - path: data/processed/larry_tips_model2_dataframe.pkl.zst
      md5: 4baed90a859b857667bf246d3d9ec24c
      size: 50020146
    - path: reports/larry_tips_model2/rainbow.pdf
      md5: 301fef4b42fb7e88f726f1d23ccf13ec
      size: 3100598
    - path: reports/larry_tips_model2/rainbow.pdf.png
      md5: 209553cb237e0e8c1cdda5cbe6014b85
      size: 1456954
    - path: reports/larry_tips_model2/shared_time.pdf
      md5: 2b312c09d59225fe90d1883928ce3a2a
      size: 445510
    - path: reports/larry_tips_model2/vector_field.pdf
      md5: 776bcc0b662fe822d2b9c1d545320961
      size: 224051
    - path: reports/larry_tips_model2/vector_field.pdf.png
      md5: 492ec117609df81723a32f62bebea0a1
      size: 489310
    - path: reports/larry_tips_model2/volcano.pdf
      md5: ffa9f121da6d238c0a600c0e695308ea
      size: 21178
