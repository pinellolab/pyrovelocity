schema: '2.0'
stages:
  data_download_pancreas:
    cmd: python data_download.py data_external.sources=[scvelo] data_external.scvelo.download=[pancreas]
    deps:
    - path: data_download.py
      md5: 30f38cc794cbf4caad2675ffd88c2467
      size: 3305
    params:
      config.yaml:
        base:
          log_level: INFO
        data_external.scvelo.pancreas:
          data_file: endocrinogenesis_day15.h5ad
          dl_root: data/Pancreas
          dl_path: data/Pancreas/endocrinogenesis_day15.h5ad
          rel_path: data/external/endocrinogenesis_day15.h5ad
          url: https://github.com/theislab/scvelo_notebooks/raw/master/data/Pancreas/endocrinogenesis_day15.h5ad
          derived:
            process_method: load_data
            process_args:
              process_cytotrace: true
            rel_path: data/processed/pancreas_processed.h5ad
    outs:
    - path: data/external/endocrinogenesis_day15.h5ad
      md5: 783ec70c72fd895eeea28c07735efc27
      size: 52477898
  preprocess_pancreas:
    cmd: python preprocess.py data_external.sources=[scvelo] data_external.scvelo.process=[pancreas]
    deps:
    - path: data/external/endocrinogenesis_day15.h5ad
      md5: 783ec70c72fd895eeea28c07735efc27
      size: 52477898
    - path: preprocess.py
      md5: bf09c86fc25b1d1a98b9aa1c5fa04361
      size: 2757
    params:
      config.yaml:
        base:
          log_level: INFO
        data_external.scvelo.pancreas:
          data_file: endocrinogenesis_day15.h5ad
          dl_root: data/Pancreas
          dl_path: data/Pancreas/endocrinogenesis_day15.h5ad
          rel_path: data/external/endocrinogenesis_day15.h5ad
          url: https://github.com/theislab/scvelo_notebooks/raw/master/data/Pancreas/endocrinogenesis_day15.h5ad
          derived:
            process_method: load_data
            process_args:
              process_cytotrace: true
            rel_path: data/processed/pancreas_processed.h5ad
    outs:
    - path: data/processed/pancreas_processed.h5ad
      md5: 09cd1685ebf6d96d69c500fec653a337
      size: 424784368
  train_pancreas_model1:
    cmd: /usr/bin/time -v python train.py model_training.train=[pancreas_model1]
    deps:
    - path: data/processed/pancreas_processed.h5ad
      md5: 09cd1685ebf6d96d69c500fec653a337
      size: 424784368
    - path: train.py
      md5: 0e7c46a112eab9290b48ad4f3deecaaa
      size: 8684
    params:
      config.yaml:
        model_training.pancreas_model1:
          path: models/pancreas_model1
          model_path: models/pancreas_model1/model
          input_data_path: data/processed/pancreas_processed.h5ad
          trained_data_path: models/pancreas_model1/trained.h5ad
          pyrovelocity_data_path: models/pancreas_model1/pyrovelocity.pkl
          metrics_path: models/pancreas_model1/metrics.json
          run_info_path: models/pancreas_model1/run_info.json
          vector_field_parameters:
            basis: umap
          training_parameters:
            _target_: pyrovelocity.api.train_model
            _partial_: true
            guide_type: auto_t0_constraint
            model_type: auto
            svi_train: false
            batch_size: -1
            train_size: 1.0
            use_gpu: 0
            likelihood: Poisson
            num_samples: 30
            log_every: 100
            cell_state: clusters
            patient_improve: 0.0001
            patient_init: 45
            seed: 99
            lr: 0.01
            max_epochs: 2000
            include_prior: true
            library_size: true
            offset: false
            input_type: raw
            cell_specific_kinetics:
            kinetics_num: 2
            loss_plot_path: models/pancreas_model1/loss_plot.png
    outs:
    - path: models/pancreas_model1/loss_plot.png
      md5: 5a0d4bd417a02d36b83211a695acf47c
      size: 11561
    - path: models/pancreas_model1/metrics.json
      md5: 37a146281f1d1ea77953a0d03c872367
      size: 160
    - path: models/pancreas_model1/model
      md5: ed4ded1a0cd1bd95b48872af78c0ab75.dir
      size: 635690
      nfiles: 1
    - path: models/pancreas_model1/pyrovelocity.pkl
      md5: c48234e73277f5131ea88bb3064a0499
      size: 111752520
    - path: models/pancreas_model1/run_info.json
      md5: 5387c03cb4ea4c6805e817be53865440
      size: 455
    - path: models/pancreas_model1/trained.h5ad
      md5: e77ffea5c0632aeecdf2003a132f6d20
      size: 492580352
  data_download_pbmc68k:
    cmd: python data_download.py data_external.sources=[scvelo] data_external.scvelo.download=[pbmc68k]
    deps:
    - path: data_download.py
      md5: 30f38cc794cbf4caad2675ffd88c2467
      size: 3305
    params:
      config.yaml:
        base:
          log_level: INFO
        data_external.scvelo.pbmc68k:
          data_file: pbmc68k.h5ad
          dl_root: data/PBMC
          dl_path: data/PBMC/pbmc68k.h5ad
          rel_path: data/external/pbmc68k.h5ad
          url: https://ndownloader.figshare.com/files/27686886
          derived:
            process_method: load_data
            process_args: {}
            rel_path: data/processed/pbmc68k_processed.h5ad
    outs:
    - path: data/external/pbmc68k.h5ad
      md5: ee0953e5fb994bc3cec05d4cf638ac79
      size: 123707283
  preprocess_pbmc68k:
    cmd: python preprocess.py data_external.sources=[scvelo] data_external.scvelo.process=[pbmc68k]
    deps:
    - path: data/external/pbmc68k.h5ad
      md5: ee0953e5fb994bc3cec05d4cf638ac79
      size: 123707283
    - path: preprocess.py
      md5: bf09c86fc25b1d1a98b9aa1c5fa04361
      size: 2757
    params:
      config.yaml:
        base:
          log_level: INFO
        data_external.scvelo.pbmc68k:
          data_file: pbmc68k.h5ad
          dl_root: data/PBMC
          dl_path: data/PBMC/pbmc68k.h5ad
          rel_path: data/external/pbmc68k.h5ad
          url: https://ndownloader.figshare.com/files/27686886
          derived:
            process_method: load_data
            process_args: {}
            rel_path: data/processed/pbmc68k_processed.h5ad
    outs:
    - path: data/processed/pbmc68k_processed.h5ad
      md5: ed04e6618cd8746a59093b4354729e6a
      size: 1971965630
  train_pbmc68k_model1:
    cmd: /usr/bin/time -v python train.py model_training.train=[pbmc68k_model1]
    deps:
    - path: data/processed/pbmc68k_processed.h5ad
      md5: ed04e6618cd8746a59093b4354729e6a
      size: 1971965630
    - path: train.py
      md5: 0e7c46a112eab9290b48ad4f3deecaaa
      size: 8684
    params:
      config.yaml:
        model_training.pbmc68k_model1:
          path: models/pbmc68k_model1
          model_path: models/pbmc68k_model1/model
          input_data_path: data/processed/pbmc68k_processed.h5ad
          trained_data_path: models/pbmc68k_model1/trained.h5ad
          pyrovelocity_data_path: models/pbmc68k_model1/pyrovelocity.pkl
          metrics_path: models/pbmc68k_model1/metrics.json
          run_info_path: models/pbmc68k_model1/run_info.json
          vector_field_parameters:
            basis: tsne
          training_parameters:
            _target_: pyrovelocity.api.train_model
            _partial_: true
            guide_type: auto_t0_constraint
            model_type: auto
            svi_train: false
            batch_size: -1
            train_size: 1.0
            use_gpu: 0
            likelihood: Poisson
            num_samples: 30
            log_every: 100
            cell_state: celltype
            patient_improve: 0.0001
            patient_init: 45
            seed: 99
            lr: 0.01
            max_epochs: 2000
            include_prior: true
            library_size: true
            offset: false
            input_type: raw
            cell_specific_kinetics:
            kinetics_num: 2
            loss_plot_path: models/pbmc68k_model1/loss_plot.png
    outs:
    - path: models/pbmc68k_model1/loss_plot.png
      md5: a37f382c7ef18d0cf52f59a65e63b148
      size: 16351
    - path: models/pbmc68k_model1/metrics.json
      md5: c29ff87fea000bf739fd4ea35ac7b817
      size: 161
    - path: models/pbmc68k_model1/model
      md5: 076c8b643e46b08b02fbbde06cb22228.dir
      size: 1701354
      nfiles: 1
    - path: models/pbmc68k_model1/pyrovelocity.pkl
      md5: fe7681af63936fe988ea942b0131fb36
      size: 724018132
    - path: models/pbmc68k_model1/run_info.json
      md5: 8d6b1da16ca7cddd3034cdedab8f044a
      size: 454
    - path: models/pbmc68k_model1/trained.h5ad
      md5: 529f8a38f96a77bbec3c3632c4efefeb
      size: 2437840906
  figure2:
    cmd: python fig2/figure.py
    deps:
    - path: fig2/figure.py
      md5: ff1ac53128478106cf019fc967bd35c4
      size: 19573
    - path: models/pancreas_model1/pyrovelocity.pkl
      md5: c48234e73277f5131ea88bb3064a0499
      size: 111752520
    - path: models/pancreas_model1/trained.h5ad
      md5: e77ffea5c0632aeecdf2003a132f6d20
      size: 492580352
    - path: models/pbmc68k_model1/pyrovelocity.pkl
      md5: fe7681af63936fe988ea942b0131fb36
      size: 724018132
    - path: models/pbmc68k_model1/trained.h5ad
      md5: 529f8a38f96a77bbec3c3632c4efefeb
      size: 2437840906
    params:
      config.yaml:
        reports.figure2:
          tag: fig2
          path: reports/fig2
          tif_path: reports/fig2/fig2_raw_gene_selection_model1.tif
          svg_path: reports/fig2/fig2_raw_gene_selection_model1.svg
          biomarker_selection_path: reports/fig2/fig2_markers_selection_scatterplot.tif
          biomarker_phaseportrait_path: reports/fig2/fig2_markers_phaseportrait.pdf
          uncertainty_param_plot_path: reports/fig2/fig2_param_uncertainties.pdf
          uncertainty_magnitude_plot_path: reports/fig2/fig2_magnitude_uncertainties.pdf
          pancreas_model1:
            shared_time_plot: reports/fig2/fig2_pancreas_shared_time.pdf
            volcano_plot: reports/fig2/fig2_pancreas_volcano.pdf
            rainbow_plot: reports/fig2/fig2_pancreas_rainbow.pdf
            vector_field_plot: reports/fig2/fig2_pancreas_vector_field.pdf
    outs:
    - path: reports/fig2/fig2_markers_phaseportrait.pdf
      md5: cc7f219a6e6bd6cb67f1990dc76639e9
      size: 4548720
    - path: reports/fig2/fig2_markers_selection_scatterplot.tif
      md5: 2bf4528b73112ead7cbdb1f28362850b
      size: 6125606
    - path: reports/fig2/fig2_param_uncertainties.pdf
      md5: 9de0508d4595d98e547aba446254646a
      size: 79990
    - path: reports/fig2/fig2_raw_gene_selection_model1.svg
      md5: bcff3c75773f88bbe5af854bf6dbfc31
      size: 49275888
    - path: reports/fig2/fig2_raw_gene_selection_model1.tif
      md5: 1877cc541d6979b75aa74273c773fcea
      size: 19864142
  plot_pancreas_model1:
    cmd: python fig2/fig2_pancreas_plot.py
    deps:
    - path: fig2/fig2_pancreas_plot.py
      md5: 9760277a8b45c2994e44f0ebc69b26e1
      size: 5816
    - path: models/pancreas_model1/pyrovelocity.pkl
      md5: c48234e73277f5131ea88bb3064a0499
      size: 111752520
    - path: models/pancreas_model1/trained.h5ad
      md5: e77ffea5c0632aeecdf2003a132f6d20
      size: 492580352
    params:
      config.yaml:
        model_training.pancreas_model1:
          path: models/pancreas_model1
          model_path: models/pancreas_model1/model
          input_data_path: data/processed/pancreas_processed.h5ad
          trained_data_path: models/pancreas_model1/trained.h5ad
          pyrovelocity_data_path: models/pancreas_model1/pyrovelocity.pkl
          metrics_path: models/pancreas_model1/metrics.json
          run_info_path: models/pancreas_model1/run_info.json
          vector_field_parameters:
            basis: umap
          training_parameters:
            _target_: pyrovelocity.api.train_model
            _partial_: true
            guide_type: auto_t0_constraint
            model_type: auto
            svi_train: false
            batch_size: -1
            train_size: 1.0
            use_gpu: 0
            likelihood: Poisson
            num_samples: 30
            log_every: 100
            cell_state: clusters
            patient_improve: 0.0001
            patient_init: 45
            seed: 99
            lr: 0.01
            max_epochs: 2000
            include_prior: true
            library_size: true
            offset: false
            input_type: raw
            cell_specific_kinetics:
            kinetics_num: 2
            loss_plot_path: models/pancreas_model1/loss_plot.png
        reports.figure2.pancreas_model1:
          shared_time_plot: reports/fig2/fig2_pancreas_shared_time.pdf
          volcano_plot: reports/fig2/fig2_pancreas_volcano.pdf
          rainbow_plot: reports/fig2/fig2_pancreas_rainbow.pdf
          vector_field_plot: reports/fig2/fig2_pancreas_vector_field.pdf
    outs:
    - path: reports/fig2/fig2_pancreas_rainbow.pdf
      md5: 40fb480c0dc47c9c713e18271e0b3569
      size: 673601
    - path: reports/fig2/fig2_pancreas_shared_time.pdf
      md5: 8aaf309fa5c24a499161172006b669fa
      size: 659960
    - path: reports/fig2/fig2_pancreas_vector_field.pdf
      md5: 09fc15b93cd288f74c366656d8f2f59a
      size: 407916
    - path: reports/fig2/fig2_pancreas_volcano.pdf
      md5: 05e306a4fcf13b9ee765239fa69e3ce2
      size: 21290
  data_download_larry:
    cmd: python data_download.py data_external.sources=[pyrovelocity] data_external.pyrovelocity.download=[larry]
    deps:
    - path: data_download.py
      md5: 30f38cc794cbf4caad2675ffd88c2467
      size: 3305
    params:
      config.yaml:
        base:
          log_level: INFO
        data_external.pyrovelocity.larry:
          data_file: larry.h5ad
          dl_root: data/external
          dl_path: data/external/larry.h5ad
          rel_path: data/external/larry.h5ad
          url: https://ndownloader.figshare.com/files/37028569
          derived:
            process_method: load_data
            process_args: {}
            rel_path: data/processed/larry_processed.h5ad
    outs:
    - path: data/external/larry.h5ad
      md5: d618305c0ee0e41570b1147e63df332a
      size: 1525338690
  train_pancreas_model2:
    cmd: /usr/bin/time -v python train.py model_training.train=[pancreas_model2]
    deps:
    - path: data/processed/pancreas_processed.h5ad
      md5: 09cd1685ebf6d96d69c500fec653a337
      size: 424784368
    - path: train.py
      md5: 0e7c46a112eab9290b48ad4f3deecaaa
      size: 8684
    params:
      config.yaml:
        model_training.pancreas_model2:
          path: models/pancreas_model2
          model_path: models/pancreas_model2/model
          input_data_path: data/processed/pancreas_processed.h5ad
          trained_data_path: models/pancreas_model2/trained.h5ad
          pyrovelocity_data_path: models/pancreas_model2/pyrovelocity.pkl
          metrics_path: models/pancreas_model2/metrics.json
          run_info_path: models/pancreas_model2/run_info.json
          vector_field_parameters:
            basis: umap
          training_parameters:
            _target_: pyrovelocity.api.train_model
            _partial_: true
            guide_type: auto
            model_type: auto
            svi_train: false
            batch_size: -1
            train_size: 1.0
            use_gpu: 0
            likelihood: Poisson
            num_samples: 30
            log_every: 100
            cell_state: clusters
            patient_improve: 0.0001
            patient_init: 45
            seed: 99
            lr: 0.01
            max_epochs: 2000
            include_prior: true
            library_size: true
            offset: true
            input_type: raw
            cell_specific_kinetics:
            kinetics_num: 2
            loss_plot_path: models/pancreas_model2/loss_plot.png
    outs:
    - path: models/pancreas_model2/loss_plot.png
      md5: 8a8de154eb3e3ad3c1f11264eadedacd
      size: 11500
    - path: models/pancreas_model2/metrics.json
      md5: bee341290f771daa82fe093995c39428
      size: 158
    - path: models/pancreas_model2/model
      md5: 754f06bc2ca1232f9585118e25db85fb.dir
      size: 923626
      nfiles: 1
    - path: models/pancreas_model2/pyrovelocity.pkl
      md5: e47389f48189529518dbb8dfc88959c2
      size: 112472656
    - path: models/pancreas_model2/run_info.json
      md5: 87be9883d84208074a4697863cde2fad
      size: 455
    - path: models/pancreas_model2/trained.h5ad
      md5: 8bf34fc00bbc46d950512aa8595844e4
      size: 492567776
  train_pbmc68k_model2:
    cmd: /usr/bin/time -v python train.py model_training.train=[pbmc68k_model2]
    deps:
    - path: data/processed/pbmc68k_processed.h5ad
      md5: ed04e6618cd8746a59093b4354729e6a
      size: 1971965630
    - path: train.py
      md5: 0e7c46a112eab9290b48ad4f3deecaaa
      size: 8684
    params:
      config.yaml:
        model_training.pbmc68k_model2:
          path: models/pbmc68k_model2
          model_path: models/pbmc68k_model2/model
          input_data_path: data/processed/pbmc68k_processed.h5ad
          trained_data_path: models/pbmc68k_model2/trained.h5ad
          pyrovelocity_data_path: models/pbmc68k_model2/pyrovelocity.pkl
          metrics_path: models/pbmc68k_model2/metrics.json
          run_info_path: models/pbmc68k_model2/run_info.json
          vector_field_parameters:
            basis: tsne
          training_parameters:
            _target_: pyrovelocity.api.train_model
            _partial_: true
            guide_type: auto
            model_type: auto
            svi_train: false
            batch_size: -1
            train_size: 1.0
            use_gpu: 0
            likelihood: Poisson
            num_samples: 30
            log_every: 100
            cell_state: celltype
            patient_improve: 0.0001
            patient_init: 45
            seed: 99
            lr: 0.01
            max_epochs: 2000
            include_prior: true
            library_size: true
            offset: true
            input_type: raw
            cell_specific_kinetics:
            kinetics_num: 2
            loss_plot_path: models/pbmc68k_model2/loss_plot.png
    outs:
    - path: models/pbmc68k_model2/loss_plot.png
      md5: bf57022bccef69aeb20a30e37539f6f0
      size: 15991
    - path: models/pbmc68k_model2/metrics.json
      md5: 9e3d8db66e0578964e0b9290835702a7
      size: 161
    - path: models/pbmc68k_model2/model
      md5: 0f3ffd90d6c656e4c320213b990967d1.dir
      size: 1762346
      nfiles: 1
    - path: models/pbmc68k_model2/pyrovelocity.pkl
      md5: 17d6a5088e56105650318070a3982a42
      size: 724170924
    - path: models/pbmc68k_model2/run_info.json
      md5: 1b86c67094284f766f88cab11d084afe
      size: 454
    - path: models/pbmc68k_model2/trained.h5ad
      md5: c3f887d00524977e87976e2fce8b8a2b
      size: 2437840906
  figureS3:
    cmd: python figS3/figure.py
    deps:
    - path: figS3/figure.py
      md5: 26fb835fc33be2700fe9e65a9f236c9a
      size: 12921
    - path: models/pancreas_model2/pyrovelocity.pkl
      md5: e47389f48189529518dbb8dfc88959c2
      size: 112472656
    - path: models/pancreas_model2/trained.h5ad
      md5: 8bf34fc00bbc46d950512aa8595844e4
      size: 492567776
    - path: models/pbmc68k_model2/pyrovelocity.pkl
      md5: 17d6a5088e56105650318070a3982a42
      size: 724170924
    - path: models/pbmc68k_model2/trained.h5ad
      md5: c3f887d00524977e87976e2fce8b8a2b
      size: 2437840906
    params:
      config.yaml:
        reports.figureS3:
          tag: figS3
          path: reports/figS3
          tif_path: reports/figS3/figS3_raw_gene_selection_model2.tif
          svg_path: reports/figS3/figS3_raw_gene_selection_model2.svg
    outs:
    - path: reports/figS3/figS3_raw_gene_selection_model2.svg
      md5: c6d2bb4206b4d9d361ad191cfe96094b
      size: 49193761
    - path: reports/figS3/figS3_raw_gene_selection_model2.tif
      md5: fae3ba78175434274ecb481f084b301f
      size: 19732046
  data_download_pons:
    cmd: python data_download.py data_external.sources=[velocyto] data_external.velocyto.download=[pons]
    deps:
    - path: data_download.py
      md5: 30f38cc794cbf4caad2675ffd88c2467
      size: 3305
    params:
      config.yaml:
        base:
          log_level: INFO
        data_external.velocyto.pons:
          data_file: oligo_lite.h5ad
          dl_root: data/external
          dl_path: data/external/oligo_lite.h5ad
          rel_path: data/external/oligo_lite.h5ad
          url: https://storage.googleapis.com/pyrovelocity/data/oligo_lite.h5ad
          derived:
            process_method: load_data
            process_args: {}
            rel_path: data/processed/pons_processed.h5ad
    outs:
    - path: data/external/oligo_lite.h5ad
      md5: 82f5e9f9736e556662f56653d2f927ab
      size: 82166707
  preprocess_pons:
    cmd: python preprocess.py data_external.sources=[velocyto] data_external.velocyto.process=[pons]
    deps:
    - path: data/external/oligo_lite.h5ad
      md5: 82f5e9f9736e556662f56653d2f927ab
      size: 82166707
    - path: preprocess.py
      md5: bf09c86fc25b1d1a98b9aa1c5fa04361
      size: 2757
    params:
      config.yaml:
        base:
          log_level: INFO
        data_external.velocyto.pons:
          data_file: oligo_lite.h5ad
          dl_root: data/external
          dl_path: data/external/oligo_lite.h5ad
          rel_path: data/external/oligo_lite.h5ad
          url: https://storage.googleapis.com/pyrovelocity/data/oligo_lite.h5ad
          derived:
            process_method: load_data
            process_args: {}
            rel_path: data/processed/pons_processed.h5ad
    outs:
    - path: data/processed/pons_processed.h5ad
      md5: b34bfedb75377eba646a9bb5b53f5099
      size: 740872455
  train_pons_model1:
    cmd: /usr/bin/time -v python train.py model_training.train=[pons_model1]
    deps:
    - path: data/processed/pons_processed.h5ad
      md5: b34bfedb75377eba646a9bb5b53f5099
      size: 740872455
    - path: train.py
      md5: 0e7c46a112eab9290b48ad4f3deecaaa
      size: 8684
    params:
      config.yaml:
        model_training.pons_model1:
          path: models/pons_model1
          model_path: models/pons_model1/model
          input_data_path: data/processed/pons_processed.h5ad
          trained_data_path: models/pons_model1/trained.h5ad
          pyrovelocity_data_path: models/pons_model1/pyrovelocity.pkl
          metrics_path: models/pons_model1/metrics.json
          run_info_path: models/pons_model1/run_info.json
          vector_field_parameters:
            basis: umap
          training_parameters:
            _target_: pyrovelocity.api.train_model
            _partial_: true
            guide_type: auto_t0_constraint
            model_type: auto
            svi_train: false
            batch_size: -1
            train_size: 1.0
            use_gpu: 0
            likelihood: Poisson
            num_samples: 30
            log_every: 100
            cell_state: celltype
            patient_improve: 0.0001
            patient_init: 45
            seed: 99
            lr: 0.01
            max_epochs: 2000
            include_prior: true
            library_size: true
            offset: false
            input_type: raw
            cell_specific_kinetics:
            kinetics_num: 2
            loss_plot_path: models/pons_model1/loss_plot.png
    outs:
    - path: models/pons_model1/loss_plot.png
      md5: f9221e79d3feccf2ec2f4df7471f9e43
      size: 11331
    - path: models/pons_model1/metrics.json
      md5: 39da7a35ab31b73075957e3e66be914b
      size: 157
    - path: models/pons_model1/model
      md5: bbf376674c58843811ca6f8d86981ac0.dir
      size: 697386
      nfiles: 1
    - path: models/pons_model1/pyrovelocity.pkl
      md5: 986fcd4656dd78e807fd7b136afbe0cd
      size: 187726094
    - path: models/pons_model1/run_info.json
      md5: ccbcbccd5844ca861b3ff33b08a2a3b0
      size: 451
    - path: models/pons_model1/trained.h5ad
      md5: 69c629707fc0687278cacbb9cca07a87
      size: 859739291
  train_pons_model2:
    cmd: /usr/bin/time -v python train.py model_training.train=[pons_model2]
    deps:
    - path: data/processed/pons_processed.h5ad
      md5: b34bfedb75377eba646a9bb5b53f5099
      size: 740872455
    - path: train.py
      md5: 0e7c46a112eab9290b48ad4f3deecaaa
      size: 8684
    params:
      config.yaml:
        model_training.pons_model2:
          path: models/pons_model2
          model_path: models/pons_model2/model
          input_data_path: data/processed/pons_processed.h5ad
          trained_data_path: models/pons_model2/trained.h5ad
          pyrovelocity_data_path: models/pons_model2/pyrovelocity.pkl
          metrics_path: models/pons_model2/metrics.json
          run_info_path: models/pons_model2/run_info.json
          vector_field_parameters:
            basis: umap
          training_parameters:
            _target_: pyrovelocity.api.train_model
            _partial_: true
            guide_type: auto
            model_type: auto
            svi_train: false
            batch_size: -1
            train_size: 1.0
            use_gpu: 0
            likelihood: Poisson
            num_samples: 30
            log_every: 100
            cell_state: celltype
            patient_improve: 0.0001
            patient_init: 45
            seed: 99
            lr: 0.01
            max_epochs: 2000
            include_prior: true
            library_size: true
            offset: true
            input_type: raw
            cell_specific_kinetics:
            kinetics_num: 2
            loss_plot_path: models/pons_model2/loss_plot.png
    outs:
    - path: models/pons_model2/loss_plot.png
      md5: 78780667ef0761b1e2fe2521492e3336
      size: 11344
    - path: models/pons_model2/metrics.json
      md5: 0868f9faea9612aa5455cbd58ee017e9
      size: 160
    - path: models/pons_model2/model
      md5: cf1b249cd8292dce62d678e2893dc150.dir
      size: 985386
      nfiles: 1
    - path: models/pons_model2/pyrovelocity.pkl
      md5: c4011079f7ee82ca53e272fedaae150a
      size: 188446272
    - path: models/pons_model2/run_info.json
      md5: 8c1ff50fdfbe0051c1065aa1c3d2f34a
      size: 451
    - path: models/pons_model2/trained.h5ad
      md5: 3fc9e620101a47d1dac920e38f6a5626
      size: 859740315
  summarize_pancreas_model1:
    cmd: python summarize.py reports.model_summary.summarize=[pancreas_model1]
    deps:
    - path: models/pancreas_model1/pyrovelocity.pkl
      md5: c48234e73277f5131ea88bb3064a0499
      size: 111752520
    - path: models/pancreas_model1/trained.h5ad
      md5: e77ffea5c0632aeecdf2003a132f6d20
      size: 492580352
    - path: summarize.py
      md5: d630951b48ee55fe8a04c2950e698056
      size: 9584
    params:
      config.yaml:
        model_training.pancreas_model1:
          path: models/pancreas_model1
          model_path: models/pancreas_model1/model
          input_data_path: data/processed/pancreas_processed.h5ad
          trained_data_path: models/pancreas_model1/trained.h5ad
          pyrovelocity_data_path: models/pancreas_model1/pyrovelocity.pkl
          metrics_path: models/pancreas_model1/metrics.json
          run_info_path: models/pancreas_model1/run_info.json
          vector_field_parameters:
            basis: umap
          training_parameters:
            _target_: pyrovelocity.api.train_model
            _partial_: true
            guide_type: auto_t0_constraint
            model_type: auto
            svi_train: false
            batch_size: -1
            train_size: 1.0
            use_gpu: 0
            likelihood: Poisson
            num_samples: 30
            log_every: 100
            cell_state: clusters
            patient_improve: 0.0001
            patient_init: 45
            seed: 99
            lr: 0.01
            max_epochs: 2000
            include_prior: true
            library_size: true
            offset: false
            input_type: raw
            cell_specific_kinetics:
            kinetics_num: 2
            loss_plot_path: models/pancreas_model1/loss_plot.png
        reports.model_summary.pancreas_model1:
          path: reports/pancreas_model1
          dataframe_path: data/processed/pancreas_model1_dataframe.pkl.zst
          shared_time_plot: reports/pancreas_model1/shared_time.pdf
          volcano_plot: reports/pancreas_model1/volcano.pdf
          rainbow_plot: reports/pancreas_model1/rainbow.pdf
          uncertainty_param_plot: reports/pancreas_model1/param_uncertainties.pdf
          vector_field_plot: reports/pancreas_model1/vector_field.pdf
          biomarker_selection_plot: reports/pancreas_model1/markers_selection_scatterplot.tif
          biomarker_phaseportrait_plot: reports/pancreas_model1/markers_phaseportrait.pdf
    outs:
    - path: data/processed/pancreas_model1_dataframe.pkl.zst
      md5: bbff19677beed1c7cf3766506f391723
      size: 12359084
    - path: reports/pancreas_model1/rainbow.pdf
      md5: 380c39c589dd38f8a0f25a623c2442ba
      size: 673601
    - path: reports/pancreas_model1/rainbow.pdf.png
      md5: 48a79de6b0115442d072fb33e2fb27fd
      size: 2086273
    - path: reports/pancreas_model1/shared_time.pdf
      md5: c40adfb007b3d4858a7e026f1c3407be
      size: 437750
    - path: reports/pancreas_model1/vector_field.pdf
      md5: c7b08babfd9ad4b6551b33abb9c51d7a
      size: 397472
    - path: reports/pancreas_model1/vector_field.pdf.png
      md5: b5a2e8186b2ab2547440582f9751024e
      size: 692177
    - path: reports/pancreas_model1/volcano.pdf
      md5: 6123ccec43f19407a6076030b2f01c30
      size: 21290
  summarize_pancreas_model2:
    cmd: python summarize.py reports.model_summary.summarize=[pancreas_model2]
    deps:
    - path: models/pancreas_model2/pyrovelocity.pkl
      md5: e47389f48189529518dbb8dfc88959c2
      size: 112472656
    - path: models/pancreas_model2/trained.h5ad
      md5: 8bf34fc00bbc46d950512aa8595844e4
      size: 492567776
    - path: summarize.py
      md5: d630951b48ee55fe8a04c2950e698056
      size: 9584
    params:
      config.yaml:
        model_training.pancreas_model2:
          path: models/pancreas_model2
          model_path: models/pancreas_model2/model
          input_data_path: data/processed/pancreas_processed.h5ad
          trained_data_path: models/pancreas_model2/trained.h5ad
          pyrovelocity_data_path: models/pancreas_model2/pyrovelocity.pkl
          metrics_path: models/pancreas_model2/metrics.json
          run_info_path: models/pancreas_model2/run_info.json
          vector_field_parameters:
            basis: umap
          training_parameters:
            _target_: pyrovelocity.api.train_model
            _partial_: true
            guide_type: auto
            model_type: auto
            svi_train: false
            batch_size: -1
            train_size: 1.0
            use_gpu: 0
            likelihood: Poisson
            num_samples: 30
            log_every: 100
            cell_state: clusters
            patient_improve: 0.0001
            patient_init: 45
            seed: 99
            lr: 0.01
            max_epochs: 2000
            include_prior: true
            library_size: true
            offset: true
            input_type: raw
            cell_specific_kinetics:
            kinetics_num: 2
            loss_plot_path: models/pancreas_model2/loss_plot.png
        reports.model_summary.pancreas_model2:
          path: reports/pancreas_model2
          dataframe_path: data/processed/pancreas_model2_dataframe.pkl.zst
          shared_time_plot: reports/pancreas_model2/shared_time.pdf
          volcano_plot: reports/pancreas_model2/volcano.pdf
          rainbow_plot: reports/pancreas_model2/rainbow.pdf
          uncertainty_param_plot: reports/pancreas_model2/param_uncertainties.pdf
          vector_field_plot: reports/pancreas_model2/vector_field.pdf
          biomarker_selection_plot: reports/pancreas_model2/markers_selection_scatterplot.tif
          biomarker_phaseportrait_plot: reports/pancreas_model2/markers_phaseportrait.pdf
    outs:
    - path: data/processed/pancreas_model2_dataframe.pkl.zst
      md5: bbff19677beed1c7cf3766506f391723
      size: 12359084
    - path: reports/pancreas_model2/rainbow.pdf
      md5: 5e2930a9a39bf5ac8ab70e9ade0630fb
      size: 674523
    - path: reports/pancreas_model2/rainbow.pdf.png
      md5: a053e9fbf0755a4fa529e92e3ef03f45
      size: 1592710
    - path: reports/pancreas_model2/shared_time.pdf
      md5: 0240283c77ead3001248656b278be707
      size: 470124
    - path: reports/pancreas_model2/vector_field.pdf
      md5: 557365b878f4af34e6be100073d1baec
      size: 397647
    - path: reports/pancreas_model2/vector_field.pdf.png
      md5: 8e8256cf0b1ba9b5aaa88ead3b60d5f7
      size: 697784
    - path: reports/pancreas_model2/volcano.pdf
      md5: 69c5d65aea1d502e51091a5b42e70861
      size: 20347
  summarize_pbmc68k_model1:
    cmd: python summarize.py reports.model_summary.summarize=[pbmc68k_model1]
    deps:
    - path: models/pbmc68k_model1/pyrovelocity.pkl
      md5: fe7681af63936fe988ea942b0131fb36
      size: 724018132
    - path: models/pbmc68k_model1/trained.h5ad
      md5: 529f8a38f96a77bbec3c3632c4efefeb
      size: 2437840906
    - path: summarize.py
      md5: d630951b48ee55fe8a04c2950e698056
      size: 9584
    params:
      config.yaml:
        model_training.pbmc68k_model1:
          path: models/pbmc68k_model1
          model_path: models/pbmc68k_model1/model
          input_data_path: data/processed/pbmc68k_processed.h5ad
          trained_data_path: models/pbmc68k_model1/trained.h5ad
          pyrovelocity_data_path: models/pbmc68k_model1/pyrovelocity.pkl
          metrics_path: models/pbmc68k_model1/metrics.json
          run_info_path: models/pbmc68k_model1/run_info.json
          vector_field_parameters:
            basis: tsne
          training_parameters:
            _target_: pyrovelocity.api.train_model
            _partial_: true
            guide_type: auto_t0_constraint
            model_type: auto
            svi_train: false
            batch_size: -1
            train_size: 1.0
            use_gpu: 0
            likelihood: Poisson
            num_samples: 30
            log_every: 100
            cell_state: celltype
            patient_improve: 0.0001
            patient_init: 45
            seed: 99
            lr: 0.01
            max_epochs: 2000
            include_prior: true
            library_size: true
            offset: false
            input_type: raw
            cell_specific_kinetics:
            kinetics_num: 2
            loss_plot_path: models/pbmc68k_model1/loss_plot.png
        reports.model_summary.pbmc68k_model1:
          path: reports/pbmc68k_model1
          dataframe_path: data/processed/pbmc68k_model1_dataframe.pkl.zst
          shared_time_plot: reports/pbmc68k_model1/shared_time.pdf
          volcano_plot: reports/pbmc68k_model1/volcano.pdf
          rainbow_plot: reports/pbmc68k_model1/rainbow.pdf
          uncertainty_param_plot: reports/pbmc68k_model1/param_uncertainties.pdf
          vector_field_plot: reports/pbmc68k_model1/vector_field.pdf
          biomarker_selection_plot: reports/pbmc68k_model1/markers_selection_scatterplot.tif
          biomarker_phaseportrait_plot: reports/pbmc68k_model1/markers_phaseportrait.pdf
    outs:
    - path: data/processed/pbmc68k_model1_dataframe.pkl.zst
      md5: ab5d52e865016970c4ce4d119b8a7d76
      size: 36404588
    - path: reports/pbmc68k_model1/rainbow.pdf
      md5: b978e0744ed9c63768a61b75202ba598
      size: 11048112
    - path: reports/pbmc68k_model1/rainbow.pdf.png
      md5: 44c9921caa21c6bd8cb97ed8a56c88e7
      size: 1331117
    - path: reports/pbmc68k_model1/shared_time.pdf
      md5: a47d99839f627e5323aa4fd5162b4db1
      size: 360278
    - path: reports/pbmc68k_model1/vector_field.pdf
      md5: 4652a4e0cdf6ab58e082af6141b6d57e
      size: 1034005
    - path: reports/pbmc68k_model1/vector_field.pdf.png
      md5: 59d41916ab64cc94a094be66cf3509f6
      size: 1187895
    - path: reports/pbmc68k_model1/volcano.pdf
      md5: 2c856ed736d7e2255715af2390957a96
      size: 23088
  summarize_pbmc68k_model2:
    cmd: python summarize.py reports.model_summary.summarize=[pbmc68k_model2]
    deps:
    - path: models/pbmc68k_model2/pyrovelocity.pkl
      md5: 17d6a5088e56105650318070a3982a42
      size: 724170924
    - path: models/pbmc68k_model2/trained.h5ad
      md5: c3f887d00524977e87976e2fce8b8a2b
      size: 2437840906
    - path: summarize.py
      md5: d630951b48ee55fe8a04c2950e698056
      size: 9584
    params:
      config.yaml:
        model_training.pbmc68k_model2:
          path: models/pbmc68k_model2
          model_path: models/pbmc68k_model2/model
          input_data_path: data/processed/pbmc68k_processed.h5ad
          trained_data_path: models/pbmc68k_model2/trained.h5ad
          pyrovelocity_data_path: models/pbmc68k_model2/pyrovelocity.pkl
          metrics_path: models/pbmc68k_model2/metrics.json
          run_info_path: models/pbmc68k_model2/run_info.json
          vector_field_parameters:
            basis: tsne
          training_parameters:
            _target_: pyrovelocity.api.train_model
            _partial_: true
            guide_type: auto
            model_type: auto
            svi_train: false
            batch_size: -1
            train_size: 1.0
            use_gpu: 0
            likelihood: Poisson
            num_samples: 30
            log_every: 100
            cell_state: celltype
            patient_improve: 0.0001
            patient_init: 45
            seed: 99
            lr: 0.01
            max_epochs: 2000
            include_prior: true
            library_size: true
            offset: true
            input_type: raw
            cell_specific_kinetics:
            kinetics_num: 2
            loss_plot_path: models/pbmc68k_model2/loss_plot.png
        reports.model_summary.pbmc68k_model2:
          path: reports/pbmc68k_model2
          dataframe_path: data/processed/pbmc68k_model2_dataframe.pkl.zst
          shared_time_plot: reports/pbmc68k_model2/shared_time.pdf
          volcano_plot: reports/pbmc68k_model2/volcano.pdf
          rainbow_plot: reports/pbmc68k_model2/rainbow.pdf
          uncertainty_param_plot: reports/pbmc68k_model2/param_uncertainties.pdf
          vector_field_plot: reports/pbmc68k_model2/vector_field.pdf
          biomarker_selection_plot: reports/pbmc68k_model2/markers_selection_scatterplot.tif
          biomarker_phaseportrait_plot: reports/pbmc68k_model2/markers_phaseportrait.pdf
    outs:
    - path: data/processed/pbmc68k_model2_dataframe.pkl.zst
      md5: ab5d52e865016970c4ce4d119b8a7d76
      size: 36404588
    - path: reports/pbmc68k_model2/rainbow.pdf
      md5: f7206b7e8a3c892b36881e9635f6a406
      size: 11386855
    - path: reports/pbmc68k_model2/rainbow.pdf.png
      md5: 8b5fc5391a9545c3c29eb2c41f502456
      size: 2312149
    - path: reports/pbmc68k_model2/shared_time.pdf
      md5: 868f28e74494899b709c38da0b4d68ec
      size: 375064
    - path: reports/pbmc68k_model2/vector_field.pdf
      md5: b4a898e4d8a7e23d77d54c0235442663
      size: 1034156
    - path: reports/pbmc68k_model2/vector_field.pdf.png
      md5: 84902b91f8f2bcc530abb3c3c09ba1a4
      size: 1183674
    - path: reports/pbmc68k_model2/volcano.pdf
      md5: 39fe62c9cddcc5460bcac99ad41b111e
      size: 22242
  summarize_pons_model1:
    cmd: python summarize.py reports.model_summary.summarize=[pons_model1]
    deps:
    - path: models/pons_model1/pyrovelocity.pkl
      md5: 986fcd4656dd78e807fd7b136afbe0cd
      size: 187726094
    - path: models/pons_model1/trained.h5ad
      md5: 69c629707fc0687278cacbb9cca07a87
      size: 859739291
    - path: summarize.py
      md5: d630951b48ee55fe8a04c2950e698056
      size: 9584
    params:
      config.yaml:
        model_training.pons_model1:
          path: models/pons_model1
          model_path: models/pons_model1/model
          input_data_path: data/processed/pons_processed.h5ad
          trained_data_path: models/pons_model1/trained.h5ad
          pyrovelocity_data_path: models/pons_model1/pyrovelocity.pkl
          metrics_path: models/pons_model1/metrics.json
          run_info_path: models/pons_model1/run_info.json
          vector_field_parameters:
            basis: umap
          training_parameters:
            _target_: pyrovelocity.api.train_model
            _partial_: true
            guide_type: auto_t0_constraint
            model_type: auto
            svi_train: false
            batch_size: -1
            train_size: 1.0
            use_gpu: 0
            likelihood: Poisson
            num_samples: 30
            log_every: 100
            cell_state: celltype
            patient_improve: 0.0001
            patient_init: 45
            seed: 99
            lr: 0.01
            max_epochs: 2000
            include_prior: true
            library_size: true
            offset: false
            input_type: raw
            cell_specific_kinetics:
            kinetics_num: 2
            loss_plot_path: models/pons_model1/loss_plot.png
        reports.model_summary.pons_model1:
          path: reports/pons_model1
          dataframe_path: data/processed/pons_model1_dataframe.pkl.zst
          shared_time_plot: reports/pons_model1/shared_time.pdf
          volcano_plot: reports/pons_model1/volcano.pdf
          rainbow_plot: reports/pons_model1/rainbow.pdf
          uncertainty_param_plot: reports/pons_model1/param_uncertainties.pdf
          vector_field_plot: reports/pons_model1/vector_field.pdf
          biomarker_selection_plot: reports/pons_model1/markers_selection_scatterplot.tif
          biomarker_phaseportrait_plot: reports/pons_model1/markers_phaseportrait.pdf
    outs:
    - path: data/processed/pons_model1_dataframe.pkl.zst
      md5: b17eb7eaadc357d32ae68e3c30ee33f4
      size: 20173882
    - path: reports/pons_model1/rainbow.pdf
      md5: 5643ec9fd68c0d303901c65cd9a67236
      size: 1055211
    - path: reports/pons_model1/rainbow.pdf.png
      md5: 5849a1d785f56ad9945bef447f1ef384
      size: 988477
    - path: reports/pons_model1/shared_time.pdf
      md5: 4dc1650e300db168deedd5897ba5a9d2
      size: 542703
    - path: reports/pons_model1/vector_field.pdf
      md5: 209c78ac8ca91999f52e1cccee4a8ccc
      size: 376801
    - path: reports/pons_model1/vector_field.pdf.png
      md5: f38be7261e92a76819e7755e337a54c4
      size: 789159
    - path: reports/pons_model1/volcano.pdf
      md5: 98243acab63c02a0575d1cb0e64cb613
      size: 20392
  summarize_pons_model2:
    cmd: python summarize.py reports.model_summary.summarize=[pons_model2]
    deps:
    - path: models/pons_model2/pyrovelocity.pkl
      md5: c4011079f7ee82ca53e272fedaae150a
      size: 188446272
    - path: models/pons_model2/trained.h5ad
      md5: 3fc9e620101a47d1dac920e38f6a5626
      size: 859740315
    - path: summarize.py
      md5: d630951b48ee55fe8a04c2950e698056
      size: 9584
    params:
      config.yaml:
        model_training.pons_model2:
          path: models/pons_model2
          model_path: models/pons_model2/model
          input_data_path: data/processed/pons_processed.h5ad
          trained_data_path: models/pons_model2/trained.h5ad
          pyrovelocity_data_path: models/pons_model2/pyrovelocity.pkl
          metrics_path: models/pons_model2/metrics.json
          run_info_path: models/pons_model2/run_info.json
          vector_field_parameters:
            basis: umap
          training_parameters:
            _target_: pyrovelocity.api.train_model
            _partial_: true
            guide_type: auto
            model_type: auto
            svi_train: false
            batch_size: -1
            train_size: 1.0
            use_gpu: 0
            likelihood: Poisson
            num_samples: 30
            log_every: 100
            cell_state: celltype
            patient_improve: 0.0001
            patient_init: 45
            seed: 99
            lr: 0.01
            max_epochs: 2000
            include_prior: true
            library_size: true
            offset: true
            input_type: raw
            cell_specific_kinetics:
            kinetics_num: 2
            loss_plot_path: models/pons_model2/loss_plot.png
        reports.model_summary.pons_model2:
          path: reports/pons_model2
          dataframe_path: data/processed/pons_model2_dataframe.pkl.zst
          shared_time_plot: reports/pons_model2/shared_time.pdf
          volcano_plot: reports/pons_model2/volcano.pdf
          rainbow_plot: reports/pons_model2/rainbow.pdf
          uncertainty_param_plot: reports/pons_model2/param_uncertainties.pdf
          vector_field_plot: reports/pons_model2/vector_field.pdf
          biomarker_selection_plot: reports/pons_model2/markers_selection_scatterplot.tif
          biomarker_phaseportrait_plot: reports/pons_model2/markers_phaseportrait.pdf
    outs:
    - path: data/processed/pons_model2_dataframe.pkl.zst
      md5: b17eb7eaadc357d32ae68e3c30ee33f4
      size: 20173882
    - path: reports/pons_model2/rainbow.pdf
      md5: a7f4759220b0bfadffd460d876bf51f5
      size: 1079005
    - path: reports/pons_model2/rainbow.pdf.png
      md5: bad7afd11e2404c13ce0d65348de117b
      size: 960916
    - path: reports/pons_model2/shared_time.pdf
      md5: ad48ed18c627339aa045225a77ecc278
      size: 559935
    - path: reports/pons_model2/vector_field.pdf
      md5: a54066e01b236c5d615b26b5cb87164d
      size: 377120
    - path: reports/pons_model2/vector_field.pdf.png
      md5: 2dbac0604c27177de808c900e34c1e2d
      size: 799077
    - path: reports/pons_model2/volcano.pdf
      md5: 616b7d74804761fc478af63fdc5c50ae
      size: 21547
  data_download_simulate:
    cmd: python data_download.py data_external.sources=[simulate] data_external.simulate.download=[medium]
    deps:
    - path: data_download.py
      md5: 30f38cc794cbf4caad2675ffd88c2467
      size: 3305
    params:
      config.yaml:
        base:
          log_level: INFO
        data_external.simulate.medium:
          data_file: simulated_medium.h5ad
          dl_root: data/external
          dl_path: data/external/simulated_medium.h5ad
          rel_path: data/external/simulated_medium.h5ad
          url: https://storage.googleapis.com/pyrovelocity/data/simulated_medium.h5ad
          derived:
            process_method: load_data
            process_args: {}
            rel_path: data/processed/simulated_medium_processed.h5ad
    outs:
    - path: data/external/simulated_medium.h5ad
      md5: c8483b84bd68f57acb407f715f807f9e
      size: 60248568
  preprocess_simulate:
    cmd: python preprocess.py data_external.sources=[simulate] data_external.simulate.process=[medium]
    deps:
    - path: data/external/simulated_medium.h5ad
      md5: c8483b84bd68f57acb407f715f807f9e
      size: 60248568
    - path: preprocess.py
      md5: bf09c86fc25b1d1a98b9aa1c5fa04361
      size: 2757
    params:
      config.yaml:
        base:
          log_level: INFO
        data_external.simulate.medium:
          data_file: simulated_medium.h5ad
          dl_root: data/external
          dl_path: data/external/simulated_medium.h5ad
          rel_path: data/external/simulated_medium.h5ad
          url: https://storage.googleapis.com/pyrovelocity/data/simulated_medium.h5ad
          derived:
            process_method: load_data
            process_args: {}
            rel_path: data/processed/simulated_medium_processed.h5ad
    outs:
    - path: data/processed/simulated_medium_processed.h5ad
      md5: 63c9bcb761899f90b7430c13f20985aa
      size: 257351792
  train_simulate_model2:
    cmd: /usr/bin/time -v python train.py model_training.train=[simulate_model2]
    deps:
    - path: data/processed/simulated_medium_processed.h5ad
      md5: 63c9bcb761899f90b7430c13f20985aa
      size: 257351792
    - path: train.py
      md5: 0e7c46a112eab9290b48ad4f3deecaaa
      size: 8684
    params:
      config.yaml:
        model_training.simulate_model2:
          path: models/medium_model2
          model_path: models/medium_model2/model
          input_data_path: data/processed/simulated_medium_processed.h5ad
          trained_data_path: models/medium_model2/trained.h5ad
          pyrovelocity_data_path: models/medium_model2/pyrovelocity.pkl
          metrics_path: models/medium_model2/metrics.json
          run_info_path: models/medium_model2/run_info.json
          vector_field_parameters:
            basis: umap
          training_parameters:
            _target_: pyrovelocity.api.train_model
            _partial_: true
            guide_type: auto
            model_type: auto
            svi_train: false
            batch_size: -1
            train_size: 1.0
            use_gpu: 0
            likelihood: Poisson
            num_samples: 30
            log_every: 100
            cell_state: leiden
            patient_improve: 0.0001
            patient_init: 45
            seed: 99
            lr: 0.01
            max_epochs: 4000
            include_prior: true
            library_size: true
            offset: true
            input_type: raw
            cell_specific_kinetics:
            kinetics_num: 2
            loss_plot_path: models/medium_model2/loss_plot.png
    outs:
    - path: models/medium_model2/loss_plot.png
      md5: 77cb69bc1f4e1de9ef25957ccb66fe2f
      size: 10825
    - path: models/medium_model2/metrics.json
      md5: 2f6cc8376db1790c0bbb2df4530ed771
      size: 159
    - path: models/medium_model2/model
      md5: b281938b6410aae7abddf632a67e4960.dir
      size: 487274
      nfiles: 1
    - path: models/medium_model2/pyrovelocity.pkl
      md5: 2d1f48b108fd5ed60e72788eed8e46f0
      size: 48113627
    - path: models/medium_model2/run_info.json
      md5: e9d8088556f7e8b197347685c69cc590
      size: 455
    - path: models/medium_model2/trained.h5ad
      md5: 5772ae621e3eece273bc9493f75664c2
      size: 283925624
  train_simulate_model1:
    cmd: /usr/bin/time -v python train.py model_training.train=[simulate_model1]
    deps:
    - path: data/processed/simulated_medium_processed.h5ad
      md5: 63c9bcb761899f90b7430c13f20985aa
      size: 257351792
    - path: train.py
      md5: 0e7c46a112eab9290b48ad4f3deecaaa
      size: 8684
    params:
      config.yaml:
        model_training.simulate_model1:
          path: models/medium_model1
          model_path: models/medium_model1/model
          input_data_path: data/processed/simulated_medium_processed.h5ad
          trained_data_path: models/medium_model1/trained.h5ad
          pyrovelocity_data_path: models/medium_model1/pyrovelocity.pkl
          metrics_path: models/medium_model1/metrics.json
          run_info_path: models/medium_model1/run_info.json
          vector_field_parameters:
            basis: umap
          training_parameters:
            _target_: pyrovelocity.api.train_model
            _partial_: true
            guide_type: auto_t0_constraint
            model_type: auto
            svi_train: false
            batch_size: -1
            train_size: 1.0
            use_gpu: 0
            likelihood: Poisson
            num_samples: 30
            log_every: 100
            cell_state: leiden
            patient_improve: 0.0001
            patient_init: 45
            seed: 99
            lr: 0.01
            max_epochs: 4000
            include_prior: true
            library_size: true
            offset: false
            input_type: raw
            cell_specific_kinetics:
            kinetics_num: 2
            loss_plot_path: models/medium_model1/loss_plot.png
    outs:
    - path: models/medium_model1/loss_plot.png
      md5: 63f564801f73360c48d0aba7ddd9ab90
      size: 10649
    - path: models/medium_model1/metrics.json
      md5: e20e88a9046cd72ea643ac092eb18a38
      size: 159
    - path: models/medium_model1/model
      md5: 093a9b0c038e3ddca3372f5e534638fb.dir
      size: 343338
      nfiles: 1
    - path: models/medium_model1/pyrovelocity.pkl
      md5: 4108204c0f84f32ff518e9923d0e1f7b
      size: 47753465
    - path: models/medium_model1/run_info.json
      md5: fecf15bebf786799b8b770ffd5e7d768
      size: 455
    - path: models/medium_model1/trained.h5ad
      md5: b90af3a5697f284fec0f13a8925e1ace
      size: 283925496
  summarize_simulate_model1:
    cmd: python summarize.py reports.model_summary.summarize=[simulate_model1]
    deps:
    - path: models/medium_model1/pyrovelocity.pkl
      md5: 4108204c0f84f32ff518e9923d0e1f7b
      size: 47753465
    - path: models/medium_model1/trained.h5ad
      md5: b90af3a5697f284fec0f13a8925e1ace
      size: 283925496
    - path: summarize.py
      md5: d630951b48ee55fe8a04c2950e698056
      size: 9584
    params:
      config.yaml:
        model_training.simulate_model1:
          path: models/medium_model1
          model_path: models/medium_model1/model
          input_data_path: data/processed/simulated_medium_processed.h5ad
          trained_data_path: models/medium_model1/trained.h5ad
          pyrovelocity_data_path: models/medium_model1/pyrovelocity.pkl
          metrics_path: models/medium_model1/metrics.json
          run_info_path: models/medium_model1/run_info.json
          vector_field_parameters:
            basis: umap
          training_parameters:
            _target_: pyrovelocity.api.train_model
            _partial_: true
            guide_type: auto_t0_constraint
            model_type: auto
            svi_train: false
            batch_size: -1
            train_size: 1.0
            use_gpu: 0
            likelihood: Poisson
            num_samples: 30
            log_every: 100
            cell_state: leiden
            patient_improve: 0.0001
            patient_init: 45
            seed: 99
            lr: 0.01
            max_epochs: 4000
            include_prior: true
            library_size: true
            offset: false
            input_type: raw
            cell_specific_kinetics:
            kinetics_num: 2
            loss_plot_path: models/medium_model1/loss_plot.png
        reports.model_summary.simulate_model1:
          path: reports/medium_model1
          dataframe_path: data/processed/medium_model1_dataframe.pkl.zst
          shared_time_plot: reports/medium_model1/shared_time.pdf
          volcano_plot: reports/medium_model1/volcano.pdf
          rainbow_plot: reports/medium_model1/rainbow.pdf
          uncertainty_param_plot: reports/medium_model1/param_uncertainties.pdf
          vector_field_plot: reports/medium_model1/vector_field.pdf
          biomarker_selection_plot: reports/medium_model1/markers_selection_scatterplot.tif
          biomarker_phaseportrait_plot: reports/medium_model1/markers_phaseportrait.pdf
    outs:
    - path: data/processed/medium_model1_dataframe.pkl.zst
      md5: 12e544a30c6d793d04f0a48245d309c8
      size: 5068789
    - path: reports/medium_model1/rainbow.pdf
      md5: d91c67540025f1c3a19229b9ade28c6d
      size: 415343
    - path: reports/medium_model1/rainbow.pdf.png
      md5: e2a988c1b94ccac347654758176abb1c
      size: 709724
    - path: reports/medium_model1/shared_time.pdf
      md5: a5f4e48bc318a0d793f9d35b880bda6e
      size: 192600
    - path: reports/medium_model1/vector_field.pdf
      md5: 24c3f2bc86abc9c9b592d2a77369503b
      size: 202635
    - path: reports/medium_model1/vector_field.pdf.png
      md5: 9671b4e3d88e3da48e7d53fd3113d3e9
      size: 501939
    - path: reports/medium_model1/volcano.pdf
      md5: 688b560b0cadd02ac8402be954fa5110
      size: 20552
  summarize_simulate_model2:
    cmd: python summarize.py reports.model_summary.summarize=[simulate_model2]
    deps:
    - path: models/medium_model2/pyrovelocity.pkl
      md5: 2d1f48b108fd5ed60e72788eed8e46f0
      size: 48113627
    - path: models/medium_model2/trained.h5ad
      md5: 5772ae621e3eece273bc9493f75664c2
      size: 283925624
    - path: summarize.py
      md5: d630951b48ee55fe8a04c2950e698056
      size: 9584
    params:
      config.yaml:
        model_training.simulate_model2:
          path: models/medium_model2
          model_path: models/medium_model2/model
          input_data_path: data/processed/simulated_medium_processed.h5ad
          trained_data_path: models/medium_model2/trained.h5ad
          pyrovelocity_data_path: models/medium_model2/pyrovelocity.pkl
          metrics_path: models/medium_model2/metrics.json
          run_info_path: models/medium_model2/run_info.json
          vector_field_parameters:
            basis: umap
          training_parameters:
            _target_: pyrovelocity.api.train_model
            _partial_: true
            guide_type: auto
            model_type: auto
            svi_train: false
            batch_size: -1
            train_size: 1.0
            use_gpu: 0
            likelihood: Poisson
            num_samples: 30
            log_every: 100
            cell_state: leiden
            patient_improve: 0.0001
            patient_init: 45
            seed: 99
            lr: 0.01
            max_epochs: 4000
            include_prior: true
            library_size: true
            offset: true
            input_type: raw
            cell_specific_kinetics:
            kinetics_num: 2
            loss_plot_path: models/medium_model2/loss_plot.png
        reports.model_summary.simulate_model2:
          path: reports/medium_model2
          dataframe_path: data/processed/medium_model2_dataframe.pkl.zst
          shared_time_plot: reports/medium_model2/shared_time.pdf
          volcano_plot: reports/medium_model2/volcano.pdf
          rainbow_plot: reports/medium_model2/rainbow.pdf
          uncertainty_param_plot: reports/medium_model2/param_uncertainties.pdf
          vector_field_plot: reports/medium_model2/vector_field.pdf
          biomarker_selection_plot: reports/medium_model2/markers_selection_scatterplot.tif
          biomarker_phaseportrait_plot: reports/medium_model2/markers_phaseportrait.pdf
    outs:
    - path: data/processed/medium_model2_dataframe.pkl.zst
      md5: 12e544a30c6d793d04f0a48245d309c8
      size: 5068789
    - path: reports/medium_model2/rainbow.pdf
      md5: bb7278f6bfebc9a4ecf86f629bdfcfdb
      size: 463594
    - path: reports/medium_model2/rainbow.pdf.png
      md5: e732a7a5a4fb3f7cf695a7883b6563f7
      size: 993907
    - path: reports/medium_model2/shared_time.pdf
      md5: c2dd63426b930ea324d64992dfdc18a2
      size: 204658
    - path: reports/medium_model2/vector_field.pdf
      md5: 4d7e3f6553e318a22ecb21c666dcc471
      size: 204699
    - path: reports/medium_model2/vector_field.pdf.png
      md5: 2b46c0b6d0c7aec6b807e0c89635362a
      size: 506131
    - path: reports/medium_model2/volcano.pdf
      md5: 67e8405453dab8a5fe1ccb4bcb997bdf
      size: 19644
  preprocess_larry:
    cmd: python preprocess.py data_external.sources=[pyrovelocity] data_external.pyrovelocity.process=[larry]
    deps:
    - path: data/external/larry.h5ad
      md5: d618305c0ee0e41570b1147e63df332a
      size: 1525338690
    - path: preprocess.py
      md5: bf09c86fc25b1d1a98b9aa1c5fa04361
      size: 2757
    params:
      config.yaml:
        base:
          log_level: INFO
        data_external.pyrovelocity.larry:
          data_file: larry.h5ad
          dl_root: data/external
          dl_path: data/external/larry.h5ad
          rel_path: data/external/larry.h5ad
          url: https://ndownloader.figshare.com/files/37028569
          derived:
            process_method: load_data
            process_args: {}
            rel_path: data/processed/larry_processed.h5ad
    outs:
    - path: data/processed/larry_processed.h5ad
      md5: aaccdd2ed8713ce1e1b1aa078993a75c
      size: 5361832686
  train_larry_model2:
    cmd: /usr/bin/time -v python train.py model_training.train=[larry_model2]
    deps:
    - path: data/processed/larry_processed.h5ad
      md5: aaccdd2ed8713ce1e1b1aa078993a75c
      size: 5361832686
    - path: train.py
      md5: 0e7c46a112eab9290b48ad4f3deecaaa
      size: 8684
    params:
      config.yaml:
        model_training.larry_model2:
          path: models/larry_model2
          model_path: models/larry_model2/model
          input_data_path: data/processed/larry_processed.h5ad
          trained_data_path: models/larry_model2/trained.h5ad
          pyrovelocity_data_path: models/larry_model2/pyrovelocity.pkl
          metrics_path: models/larry_model2/metrics.json
          run_info_path: models/larry_model2/run_info.json
          vector_field_parameters:
            basis: emb
          training_parameters:
            _target_: pyrovelocity.api.train_model
            _partial_: true
            guide_type: auto
            model_type: auto
            svi_train: true
            batch_size: 4000
            train_size: 1.0
            use_gpu: 0
            likelihood: Poisson
            num_samples: 30
            log_every: 100
            cell_state: state_info
            patient_improve: 0.0001
            patient_init: 45
            seed: 99
            lr: 0.01
            max_epochs: 1000
            include_prior: true
            library_size: true
            offset: true
            input_type: raw
            cell_specific_kinetics:
            kinetics_num: 2
            loss_plot_path: models/larry_model2/loss_plot.png
    outs:
    - path: models/larry_model2/loss_plot.png
      md5: d86e765e57aa53a4573ff10de3822ea7
      size: 11622
    - path: models/larry_model2/metrics.json
      md5: c16901f655f254b96cfb738a5b239850
      size: 159
    - path: models/larry_model2/model
      md5: f16ffe49f9c33a12773b541d7147ffd6.dir
      size: 2050986
      nfiles: 1
    - path: models/larry_model2/pyrovelocity.pkl
      md5: f2506ec58d39242340c1161bdbe0fa41
      size: 1467519359
    - path: models/larry_model2/run_info.json
      md5: 3db64da17d38599035ac9ff7da18675b
      size: 452
    - path: models/larry_model2/trained.h5ad
      md5: 2792fddaa89e554d8dc01a2b28429dff
      size: 6327389534
  data_download_larry_neu:
    cmd: python data_download.py data_external.sources=[pyrovelocity] data_external.pyrovelocity.download=[larry_neu]
    deps:
    - path: data_download.py
      md5: 30f38cc794cbf4caad2675ffd88c2467
      size: 3305
    params:
      config.yaml:
        base:
          log_level: INFO
        data_external.pyrovelocity.larry_neu:
          data_file: larry_neu.h5ad
          dl_root: data/external
          dl_path: data/external/larry_neu.h5ad
          rel_path: data/external/larry_neu.h5ad
          url: https://ndownloader.figshare.com/files/37028575
          derived:
            process_method: load_data
            process_args: {}
            rel_path: data/processed/larry_neu_processed.h5ad
    outs:
    - path: data/external/larry_neu.h5ad
      md5: 3192e2fe89d64f5d0d158c0e7d26c79d
      size: 60008807
  preprocess_larry_neu:
    cmd: python preprocess.py data_external.sources=[pyrovelocity] data_external.pyrovelocity.process=[larry_neu]
    deps:
    - path: data/external/larry_neu.h5ad
      md5: 3192e2fe89d64f5d0d158c0e7d26c79d
      size: 60008807
    - path: preprocess.py
      md5: bf09c86fc25b1d1a98b9aa1c5fa04361
      size: 2757
    params:
      config.yaml:
        base:
          log_level: INFO
        data_external.pyrovelocity.larry_neu:
          data_file: larry_neu.h5ad
          dl_root: data/external
          dl_path: data/external/larry_neu.h5ad
          rel_path: data/external/larry_neu.h5ad
          url: https://ndownloader.figshare.com/files/37028575
          derived:
            process_method: load_data
            process_args: {}
            rel_path: data/processed/larry_neu_processed.h5ad
    outs:
    - path: data/processed/larry_neu_processed.h5ad
      md5: 8055441706acc4572ce9f977e4a773af
      size: 119663475
  data_download_larry_mono:
    cmd: python data_download.py data_external.sources=[pyrovelocity] data_external.pyrovelocity.download=[larry_mono]
    deps:
    - path: data_download.py
      md5: 30f38cc794cbf4caad2675ffd88c2467
      size: 3305
    params:
      config.yaml:
        base:
          log_level: INFO
        data_external.pyrovelocity.larry_mono:
          data_file: larry_mono.h5ad
          dl_root: data/external
          dl_path: data/external/larry_mono.h5ad
          rel_path: data/external/larry_mono.h5ad
          url: https://ndownloader.figshare.com/files/37028572
          derived:
            process_method: load_data
            process_args: {}
            rel_path: data/processed/larry_mono_processed.h5ad
    outs:
    - path: data/external/larry_mono.h5ad
      md5: 01f4e084c37482e26800ba4dfa0202bd
      size: 66173538
  preprocess_larry_mono:
    cmd: python preprocess.py data_external.sources=[pyrovelocity] data_external.pyrovelocity.process=[larry_mono]
    deps:
    - path: data/external/larry_mono.h5ad
      md5: 01f4e084c37482e26800ba4dfa0202bd
      size: 66173538
    - path: preprocess.py
      md5: bf09c86fc25b1d1a98b9aa1c5fa04361
      size: 2757
    params:
      config.yaml:
        base:
          log_level: INFO
        data_external.pyrovelocity.larry_mono:
          data_file: larry_mono.h5ad
          dl_root: data/external
          dl_path: data/external/larry_mono.h5ad
          rel_path: data/external/larry_mono.h5ad
          url: https://ndownloader.figshare.com/files/37028572
          derived:
            process_method: load_data
            process_args: {}
            rel_path: data/processed/larry_mono_processed.h5ad
    outs:
    - path: data/processed/larry_mono_processed.h5ad
      md5: c8da12d2d20440714deea2355f173cdd
      size: 139326026
  train_larry_mono_model2:
    cmd: /usr/bin/time -v python train.py model_training.train=[larry_mono_model2]
    deps:
    - path: data/processed/larry_mono_processed.h5ad
      md5: c8da12d2d20440714deea2355f173cdd
      size: 139326026
    - path: train.py
      md5: 0e7c46a112eab9290b48ad4f3deecaaa
      size: 8684
    params:
      config.yaml:
        model_training.larry_mono_model2:
          path: models/larry_mono_model2
          model_path: models/larry_mono_model2/model
          input_data_path: data/processed/larry_mono_processed.h5ad
          trained_data_path: models/larry_mono_model2/trained.h5ad
          pyrovelocity_data_path: models/larry_mono_model2/pyrovelocity.pkl
          metrics_path: models/larry_mono_model2/metrics.json
          run_info_path: models/larry_mono_model2/run_info.json
          vector_field_parameters:
            basis: emb
          training_parameters:
            _target_: pyrovelocity.api.train_model
            _partial_: true
            guide_type: auto
            model_type: auto
            svi_train: true
            batch_size: 4000
            train_size: 1.0
            use_gpu: 0
            likelihood: Poisson
            num_samples: 30
            log_every: 100
            cell_state: state_info
            patient_improve: 0.0001
            patient_init: 45
            seed: 99
            lr: 0.01
            max_epochs: 1000
            include_prior: true
            library_size: true
            offset: true
            input_type: raw
            cell_specific_kinetics:
            kinetics_num: 2
            loss_plot_path: models/larry_mono_model2/loss_plot.png
    outs:
    - path: models/larry_mono_model2/loss_plot.png
      md5: 906f8f1c5ea6df8d0c58bd7d7a78455c
      size: 12683
    - path: models/larry_mono_model2/metrics.json
      md5: 410757cc76ed1e8d8b1129b0f960032a
      size: 160
    - path: models/larry_mono_model2/model
      md5: c0295ac173a687698ae6aae28b77b893.dir
      size: 610922
      nfiles: 1
    - path: models/larry_mono_model2/pyrovelocity.pkl
      md5: f01eb5dc69837c54b87bcc8e2b5a44ba
      size: 31370431
    - path: models/larry_mono_model2/run_info.json
      md5: cf37a3798bb509ec3562892d32cd680d
      size: 457
    - path: models/larry_mono_model2/trained.h5ad
      md5: c780ef69b72cac8c4577f72f23662c14
      size: 159518018
  train_larry_neu_model2:
    cmd: /usr/bin/time -v python train.py model_training.train=[larry_neu_model2]
    deps:
    - path: data/processed/larry_neu_processed.h5ad
      md5: 8055441706acc4572ce9f977e4a773af
      size: 119663475
    - path: train.py
      md5: 0e7c46a112eab9290b48ad4f3deecaaa
      size: 8684
    params:
      config.yaml:
        model_training.larry_neu_model2:
          path: models/larry_neu_model2
          model_path: models/larry_neu_model2/model
          input_data_path: data/processed/larry_neu_processed.h5ad
          trained_data_path: models/larry_neu_model2/trained.h5ad
          pyrovelocity_data_path: models/larry_neu_model2/pyrovelocity.pkl
          metrics_path: models/larry_neu_model2/metrics.json
          run_info_path: models/larry_neu_model2/run_info.json
          vector_field_parameters:
            basis: emb
          training_parameters:
            _target_: pyrovelocity.api.train_model
            _partial_: true
            guide_type: auto
            model_type: auto
            svi_train: true
            batch_size: 4000
            train_size: 1.0
            use_gpu: 0
            likelihood: Poisson
            num_samples: 30
            log_every: 100
            cell_state: state_info
            patient_improve: 0.0001
            patient_init: 45
            seed: 99
            lr: 0.01
            max_epochs: 1000
            include_prior: true
            library_size: true
            offset: true
            input_type: raw
            cell_specific_kinetics:
            kinetics_num: 2
            loss_plot_path: models/larry_neu_model2/loss_plot.png
    outs:
    - path: models/larry_neu_model2/loss_plot.png
      md5: c7faa07326dd0881f86ce883ca176908
      size: 12516
    - path: models/larry_neu_model2/metrics.json
      md5: cfe11289a39350f0d85ef1790cd3fe4e
      size: 159
    - path: models/larry_neu_model2/model
      md5: 7017069844b7ab815bdb11f69d6de0a7.dir
      size: 564522
      nfiles: 1
    - path: models/larry_neu_model2/pyrovelocity.pkl
      md5: ab4f60b89d49b535773f95fb3abf8a67
      size: 28127708
    - path: models/larry_neu_model2/run_info.json
      md5: 606c2a5077a73ed7c0f8f383d5ae993b
      size: 456
    - path: models/larry_neu_model2/trained.h5ad
      md5: b4da973f2d64d73672a1bd97bc17e809
      size: 136947799
  preprocess_larry_multilineage:
    cmd: python preprocess.py data_external.sources=[pyrovelocity] data_external.pyrovelocity.process=[larry_multilineage]
    deps:
    - path: data/external/larry_mono.h5ad
      md5: 01f4e084c37482e26800ba4dfa0202bd
      size: 66173538
    - path: data/external/larry_neu.h5ad
      md5: 3192e2fe89d64f5d0d158c0e7d26c79d
      size: 60008807
    - path: preprocess.py
      md5: bf09c86fc25b1d1a98b9aa1c5fa04361
      size: 2757
    params:
      config.yaml:
        base:
          log_level: INFO
        data_external.pyrovelocity.larry_multilineage:
          data_file: larry_mono.h5ad
          dl_root: data/external
          dl_path: data/external/larry_mono.h5ad
          rel_path: data/external/larry_mono.h5ad
          url: https://ndownloader.figshare.com/files/37028572
          derived:
            process_method: load_data
            process_args: {}
            rel_path: data/processed/larry_multilineage_processed.h5ad
    outs:
    - path: data/processed/larry_multilineage_processed.h5ad
      md5: c8da12d2d20440714deea2355f173cdd
      size: 139326026
  train_larry_multilineage_model2:
    cmd: /usr/bin/time -v python train.py model_training.train=[larry_multilineage_model2]
    deps:
    - path: data/processed/larry_multilineage_processed.h5ad
      md5: c8da12d2d20440714deea2355f173cdd
      size: 139326026
    - path: train.py
      md5: 0e7c46a112eab9290b48ad4f3deecaaa
      size: 8684
    params:
      config.yaml:
        model_training.larry_multilineage_model2:
          path: models/larry_multilineage_model2
          model_path: models/larry_multilineage_model2/model
          input_data_path: data/processed/larry_multilineage_processed.h5ad
          trained_data_path: models/larry_multilineage_model2/trained.h5ad
          pyrovelocity_data_path: models/larry_multilineage_model2/pyrovelocity.pkl
          metrics_path: models/larry_multilineage_model2/metrics.json
          run_info_path: models/larry_multilineage_model2/run_info.json
          vector_field_parameters:
            basis: emb
          training_parameters:
            _target_: pyrovelocity.api.train_model
            _partial_: true
            guide_type: auto
            model_type: auto
            svi_train: true
            batch_size: 4000
            train_size: 1.0
            use_gpu: 0
            likelihood: Poisson
            num_samples: 30
            log_every: 100
            cell_state: state_info
            patient_improve: 0.0001
            patient_init: 45
            seed: 99
            lr: 0.01
            max_epochs: 1000
            include_prior: true
            library_size: true
            offset: true
            input_type: raw
            cell_specific_kinetics:
            kinetics_num: 2
            loss_plot_path: models/larry_multilineage_model2/loss_plot.png
    outs:
    - path: models/larry_multilineage_model2/loss_plot.png
      md5: 906f8f1c5ea6df8d0c58bd7d7a78455c
      size: 12683
    - path: models/larry_multilineage_model2/metrics.json
      md5: 410757cc76ed1e8d8b1129b0f960032a
      size: 160
    - path: models/larry_multilineage_model2/model
      md5: 81bde9bfffcd16879f0a580148c34686.dir
      size: 610922
      nfiles: 1
    - path: models/larry_multilineage_model2/pyrovelocity.pkl
      md5: f01eb5dc69837c54b87bcc8e2b5a44ba
      size: 31370431
    - path: models/larry_multilineage_model2/run_info.json
      md5: 1c21cf4091c4a67b20337bc9396419f6
      size: 465
    - path: models/larry_multilineage_model2/trained.h5ad
      md5: b820155ca0bf0736bacfed679ddc7e8f
      size: 159518018
  preprocess_pbmc10k:
    cmd: python preprocess.py data_external.sources=[pyrovelocity] data_external.scvelo.process=[pyrovelocity]
    deps:
    - path: data/external/pbmc10k.h5ad
      md5: 3b64b4cd122454610957f5c6086e2eac
      size: 592149007
    - path: preprocess.py
      md5: bf09c86fc25b1d1a98b9aa1c5fa04361
      size: 2757
    params:
      config.yaml:
        base:
          log_level: INFO
        data_external.pyrovelocity.pbmc10k:
          data_file: pbmc10k.h5ad
          dl_root: data/external
          dl_path: data/external/pbmc10k.h5ad
          rel_path: data/external/pbmc10k.h5ad
          url: https://ndownloader.figshare.com/files/pbmc10k
          derived:
            process_method: load_data
            process_args: {}
            rel_path: data/processed/pbmc10k_processed.h5ad
    outs:
    - path: data/processed/pbmc10k_processed.h5ad
      md5: 178e9cd548a71ecfc249be730c92bde7
      size: 1364055449
  train_pbmc10k_model2:
    cmd: /usr/bin/time -v python train.py model_training.train=[pbmc10k_model2]
    deps:
    - path: data/processed/pbmc10k_processed.h5ad
      md5: 178e9cd548a71ecfc249be730c92bde7
      size: 1364055449
    - path: train.py
      md5: 0e7c46a112eab9290b48ad4f3deecaaa
      size: 8684
    params:
      config.yaml:
        model_training.pbmc10k_model2:
          path: models/pbmc10k_model2
          model_path: models/pbmc10k_model2/model
          input_data_path: data/processed/pbmc10k_processed.h5ad
          trained_data_path: models/pbmc10k_model2/trained.h5ad
          pyrovelocity_data_path: models/pbmc10k_model2/pyrovelocity.pkl
          metrics_path: models/pbmc10k_model2/metrics.json
          run_info_path: models/pbmc10k_model2/run_info.json
          vector_field_parameters:
            basis: tsne
          training_parameters:
            _target_: pyrovelocity.api.train_model
            _partial_: true
            guide_type: auto
            model_type: auto
            svi_train: false
            batch_size: -1
            train_size: 1.0
            use_gpu: 0
            likelihood: Poisson
            num_samples: 30
            log_every: 100
            cell_state: leiden
            patient_improve: 0.0001
            patient_init: 45
            seed: 99
            lr: 0.01
            max_epochs: 2000
            include_prior: true
            library_size: true
            offset: true
            input_type: raw
            cell_specific_kinetics:
            kinetics_num: 2
            loss_plot_path: models/pbmc10k_model2/loss_plot.png
    outs:
    - path: models/pbmc10k_model2/loss_plot.png
      md5: 5f7a8ad68a2dd4efd0996e05df2836a9
      size: 11472
    - path: models/pbmc10k_model2/metrics.json
      md5: 37bcf89028a0b7c5ee9ca01d491dc54b
      size: 159
    - path: models/pbmc10k_model2/model
      md5: 569818a9eea355b915b688e187b49a96.dir
      size: 1131242
      nfiles: 1
    - path: models/pbmc10k_model2/pyrovelocity.pkl
      md5: 1cc0371503167ac1d8a2a21a174312d4
      size: 347701927
    - path: models/pbmc10k_model2/run_info.json
      md5: de51c9a4c124ab6b3fd1ccf11b7f018e
      size: 454
    - path: models/pbmc10k_model2/trained.h5ad
      md5: 385a7c9ccdf11827863e13437cdae98f
      size: 1581587701
  figure2_extras:
    cmd: python fig2/figure_extras.py reports.model_summary.summarize=[pancreas_model2,pbmc68k_model2]
    deps:
    - path: fig2/figure_extras.py
      md5: e40ad67e697be6dddb77c73719844a38
      size: 6017
    - path: models/pancreas_model2/pyrovelocity.pkl
      md5: e47389f48189529518dbb8dfc88959c2
      size: 112472656
    - path: models/pbmc68k_model2/pyrovelocity.pkl
      md5: 17d6a5088e56105650318070a3982a42
      size: 724170924
    params:
      config.yaml:
        reports.figure2:
          tag: fig2
          path: reports/fig2
          tif_path: reports/fig2/fig2_raw_gene_selection_model1.tif
          svg_path: reports/fig2/fig2_raw_gene_selection_model1.svg
          biomarker_selection_path: reports/fig2/fig2_markers_selection_scatterplot.tif
          biomarker_phaseportrait_path: reports/fig2/fig2_markers_phaseportrait.pdf
          uncertainty_param_plot_path: reports/fig2/fig2_param_uncertainties.pdf
          uncertainty_magnitude_plot_path: reports/fig2/fig2_magnitude_uncertainties.pdf
          pancreas_model1:
            shared_time_plot: reports/fig2/fig2_pancreas_shared_time.pdf
            volcano_plot: reports/fig2/fig2_pancreas_volcano.pdf
            rainbow_plot: reports/fig2/fig2_pancreas_rainbow.pdf
            vector_field_plot: reports/fig2/fig2_pancreas_vector_field.pdf
    outs:
    - path: reports/fig2/fig2_pancreas_pbmc_uncertainties_comparison.pdf
      md5: d06b622119c38d1c820c5bad7ab7544a
      size: 194356
  summarize_pbmc10k_model2:
    cmd: python summarize.py reports.model_summary.summarize=[pbmc10k_model2]
    deps:
    - path: models/pbmc10k_model2/pyrovelocity.pkl
      md5: 1cc0371503167ac1d8a2a21a174312d4
      size: 347701927
    - path: models/pbmc10k_model2/trained.h5ad
      md5: 385a7c9ccdf11827863e13437cdae98f
      size: 1581587701
    - path: summarize.py
      md5: d630951b48ee55fe8a04c2950e698056
      size: 9584
    params:
      config.yaml:
        model_training.pbmc10k_model2:
          path: models/pbmc10k_model2
          model_path: models/pbmc10k_model2/model
          input_data_path: data/processed/pbmc10k_processed.h5ad
          trained_data_path: models/pbmc10k_model2/trained.h5ad
          pyrovelocity_data_path: models/pbmc10k_model2/pyrovelocity.pkl
          metrics_path: models/pbmc10k_model2/metrics.json
          run_info_path: models/pbmc10k_model2/run_info.json
          vector_field_parameters:
            basis: tsne
          training_parameters:
            _target_: pyrovelocity.api.train_model
            _partial_: true
            guide_type: auto
            model_type: auto
            svi_train: false
            batch_size: -1
            train_size: 1.0
            use_gpu: 0
            likelihood: Poisson
            num_samples: 30
            log_every: 100
            cell_state: leiden
            patient_improve: 0.0001
            patient_init: 45
            seed: 99
            lr: 0.01
            max_epochs: 2000
            include_prior: true
            library_size: true
            offset: true
            input_type: raw
            cell_specific_kinetics:
            kinetics_num: 2
            loss_plot_path: models/pbmc10k_model2/loss_plot.png
        reports.model_summary.pbmc10k_model2:
          path: reports/pbmc10k_model2
          dataframe_path: data/processed/pbmc10k_model2_dataframe.pkl.zst
          shared_time_plot: reports/pbmc10k_model2/shared_time.pdf
          volcano_plot: reports/pbmc10k_model2/volcano.pdf
          rainbow_plot: reports/pbmc10k_model2/rainbow.pdf
          uncertainty_param_plot: reports/pbmc10k_model2/param_uncertainties.pdf
          vector_field_plot: reports/pbmc10k_model2/vector_field.pdf
          biomarker_selection_plot: reports/pbmc10k_model2/markers_selection_scatterplot.tif
          biomarker_phaseportrait_plot: reports/pbmc10k_model2/markers_phaseportrait.pdf
    outs:
    - path: data/processed/pbmc10k_model2_dataframe.pkl.zst
      md5: cd6cca4562de776a573e3ca3ebfc80c9
      size: 37004116
    - path: reports/pbmc10k_model2/rainbow.pdf
      md5: 54d6fb9230800d2b96ada8753abed327
      size: 2033844
    - path: reports/pbmc10k_model2/rainbow.pdf.png
      md5: 02d18afa1eb81e1fdc36c26386bb8212
      size: 1644664
    - path: reports/pbmc10k_model2/shared_time.pdf
      md5: b0b5a0cb5ae5901b09467cb4d1849c68
      size: 390684
    - path: reports/pbmc10k_model2/vector_field.pdf
      md5: 163b3e3d7b8870cd20ce8c96eb9fb6bf
      size: 504868
    - path: reports/pbmc10k_model2/vector_field.pdf.png
      md5: 8273b20bf64e8f83260ce59330614dae
      size: 994577
    - path: reports/pbmc10k_model2/volcano.pdf
      md5: c3e6e303d4759281ee60a3ab0d5e38a4
      size: 21847
  data_download_pbmc10k:
    cmd: echo "Reference pbmc10k"
    deps:
    - path: data_download.py
      md5: 30f38cc794cbf4caad2675ffd88c2467
      size: 3305
    params:
      config.yaml:
        base:
          log_level: INFO
        data_external.pyrovelocity.pbmc10k:
          data_file: pbmc10k.h5ad
          dl_root: data/external
          dl_path: data/external/pbmc10k.h5ad
          rel_path: data/external/pbmc10k.h5ad
          url: https://ndownloader.figshare.com/files/pbmc10k
          derived:
            process_method: load_data
            process_args: {}
            rel_path: data/processed/pbmc10k_processed.h5ad
    outs:
    - path: data/external/pbmc10k.h5ad
      md5: 3b64b4cd122454610957f5c6086e2eac
      size: 592149007
